(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{896:function(e,t,r){"use strict";r.r(t);var n=r(14),a=r(20),o=r(38),i=r.n(o),l=r(39),s=r.n(l),u=r(40),c=r(42),d=new(r(69).AllHtmlEntities),f=r(73),h=r(17);function g(e){const t=e.state.form;if("image"!==t.$("imageType").value||!t.$("shareAgreed").value)return;const r=t.$("shareRejectReasons").value;if(!r)return;const n=e.key,a=t.state.initial.props.values;return r[n]&&a[n].toString()===e.value.toString()?[!1,r[n]]:void 0}function m(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=v(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,l=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return i=e.done,e},e:function(e){l=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(l)throw o}}}}function v(e,t){if(e){if("string"==typeof e)return p(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?p(e,t):void 0}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function y(){const e={fields:["currentAuthorUid","id","uid","name","imageType","url","showText","fontSize","bgColor","src","shareAgreed","type","type[]","description","isCustom","shareId","authorUid","shareRejectReasons","updateTime"],handlers:{type:{onChange:e=>Object(n.action)("updateType",t=>{Object.keys(e.get()).forEach(t=>{e.del(t)});var r,n=m(t);try{for(n.s();!(r=n.n()).done;){const t=r.value;e.add({value:t})}}catch(e){n.e(e)}finally{n.f()}e.validate({showErrors:!0})})}},types:{shareAgreed:"checkbox"},labels:{shareAgreed:Object(u.a)("share_to_others")},validators:{url({field:e,form:t}){const r=g(e);if(r)return r;const n=e.value;return 0===n.length?[!1,Object(u.a)("required")]:"image"!==t.$("imageType").value||!t.$("shareAgreed").value||[Object(h.n)(n),Object(u.a)("please_input_correct_url")]},name({field:e,form:t}){const r=g(e);return r||("image"!==t.$("imageType").value||!t.$("shareAgreed").value||[e.value.length>0,Object(u.a)("required")])},src({field:e,form:t}){const r=g(e);return r||("image"!==t.$("imageType").value||[e.value.length>0,Object(u.a)("required")])},type({field:e,form:t}){const r=g(e);return r||("image"!==t.$("imageType").value||!t.$("shareAgreed").value||[e.value.length>0,Object(u.a)("required")])},description({field:e,form:t}){const r=g(e);return r||("image"!==t.$("imageType").value||!t.$("shareAgreed").value||[e.value.length>0,Object(u.a)("required")])}},placeholders:{name:Object(u.a)("site_name"),url:"http://",showText:Object(u.a)("display_text"),type:Object(u.a)("click_add_tag"),description:Object(u.a)("site_desc")},options:{url:{validateOnChange:!0},name:{validateOnChange:!0},src:{validateOnChange:!0},description:{validateOnChange:!0}},observers:{shareAgreed:[{key:"value",call:({form:e})=>{e.$("url").validate({showErrors:!0}),e.$("name").validate({showErrors:!0})}}],name:[{key:"value",call:({form:e,change:t})=>{const r=t.newValue;e.$("showText").touched||e.set({showText:r.slice(0,2)})}}],url:[{key:"value",call:s()(({form:e,change:t})=>{let r=t.newValue.trim();r&&(r=Object(f.e)(r),Object(c.a)(r,{responseType:"text"}).then(t=>{const r=/<title>(.*)<\/\s*title>/.exec(t);if(r){const t=d.decode(r[1]);if("Redirect"===t)return;e.set({name:t,showText:t})}}))},600)}]}},t={plugins:{vjf:i()()}};return new a.Form(e,t)}r.d(t,"default",(function(){return y}))}}]);