"use strict";var iEditDelete={isEdit:!1,init:function(){var a=this;$(document).on("contextmenu",".item-icon",function(i){i.preventDefault(),i.stopPropagation(),a.start()}),$(document).on("click",function(i){!a.isEdit||-1==(i=i.target.className).indexOf("point-item")&&-1==i.indexOf("icon-img")&&a.end()}),$(document).on("click",".icon-item-edit",function(i){i.preventDefault(),i.stopPropagation();var i=$(this).parents(".item-icon")[0],i=($(this).parents(".icon-item-out")[0],decodeURIComponent(i.dataset.icon)),e=$(this).parents(".group").index(),t=$(this).parents(".icon-item-out").index(),n=JSON.parse(i);iView&&iView.showCover(),infinity.import("edit",".side-all",function(i){a.end(),$(".i-edit").removeClass("i-side-hide"),$(".i-edit")[0].offsetHeight,$(".i-edit").addClass("i-side-show"),i.init(n,e,t)})}),$(document).on("click",".item-icon-del",function(i){i.preventDefault(),i.stopPropagation();var t=$(this).parents(".group").index(),n=t,o=$(this).parents(".icon-item-out").index(),s=$(this).parents(".icon-item-out")[0];$(s).removeClass("infinity-icon-shake"),$(s).addClass("infinity-zoom-hide"),$(s).one(animationendEvent,function(i){$(s).remove();var e=infinity.get("infinity-icons");1==e[t].length?(e.length,0==t?(e.splice(t,1),_app.data.groups=e,_app.render(),a.start()):(e.splice(t,1),_app.data.groups=e,_app.render(),a.start(),n=t-1,iView.slideToPage(n,400,function(){}))):e[t].splice(o,1),infinity.set("infinity-icons",e),infinity.sendMessage("icon-handle",{type:"delete",page:n}),infinity.sendMessage("backupToCloud"),infinity.sendMessage("bg-reCheckIsAdded")})})},start:function(){$(".icon-item-out").addClass("infinity-icon-shake"),this.isEdit=!0},end:function(){$(".icon-item-out").removeClass("infinity-icon-shake"),self.isEdit=!1}};iEditDelete.init();