!function(e){function t(t){for(var o,i,s=t[0],u=t[1],l=t[2],d=0,p=[];d<s.length;d++)i=s[d],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&p.push(r[i][0]),r[i]=0;for(o in u)Object.prototype.hasOwnProperty.call(u,o)&&(e[o]=u[o]);for(c&&c(t);p.length;)p.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],o=!0,s=1;s<n.length;s++){var u=n[s];0!==r[u]&&(o=!1)}o&&(a.splice(t--,1),e=i(i.s=n[0]))}return e}var o={},r={9:0},a=[];function i(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=o,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var s=window.webpackJsonp=window.webpackJsonp||[],u=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var c=u;a.push([268,0,1,2,4,15,3]),n()}({127:function(e,t,n){var o=n(162);e.exports="string"==typeof o?o:o.toString()},128:function(e,t,n){"use strict";n.d(t,"a",(function(){return w}));var o=n(86),r=n(15);const a=/[\0-\x1F\x7F-\x9F\xAD\u0378\u0379\u037F-\u0383\u038B\u038D\u03A2\u0528-\u0530\u0557\u0558\u0560\u0588\u058B-\u058E\u0590\u05C8-\u05CF\u05EB-\u05EF\u05F5-\u0605\u061C\u061D\u06DD\u070E\u070F\u074B\u074C\u07B2-\u07BF\u07FB-\u07FF\u082E\u082F\u083F\u085C\u085D\u085F-\u089F\u08A1\u08AD-\u08E3\u08FF\u0978\u0980\u0984\u098D\u098E\u0991\u0992\u09A9\u09B1\u09B3-\u09B5\u09BA\u09BB\u09C5\u09C6\u09C9\u09CA\u09CF-\u09D6\u09D8-\u09DB\u09DE\u09E4\u09E5\u09FC-\u0A00\u0A04\u0A0B-\u0A0E\u0A11\u0A12\u0A29\u0A31\u0A34\u0A37\u0A3A\u0A3B\u0A3D\u0A43-\u0A46\u0A49\u0A4A\u0A4E-\u0A50\u0A52-\u0A58\u0A5D\u0A5F-\u0A65\u0A76-\u0A80\u0A84\u0A8E\u0A92\u0AA9\u0AB1\u0AB4\u0ABA\u0ABB\u0AC6\u0ACA\u0ACE\u0ACF\u0AD1-\u0ADF\u0AE4\u0AE5\u0AF2-\u0B00\u0B04\u0B0D\u0B0E\u0B11\u0B12\u0B29\u0B31\u0B34\u0B3A\u0B3B\u0B45\u0B46\u0B49\u0B4A\u0B4E-\u0B55\u0B58-\u0B5B\u0B5E\u0B64\u0B65\u0B78-\u0B81\u0B84\u0B8B-\u0B8D\u0B91\u0B96-\u0B98\u0B9B\u0B9D\u0BA0-\u0BA2\u0BA5-\u0BA7\u0BAB-\u0BAD\u0BBA-\u0BBD\u0BC3-\u0BC5\u0BC9\u0BCE\u0BCF\u0BD1-\u0BD6\u0BD8-\u0BE5\u0BFB-\u0C00\u0C04\u0C0D\u0C11\u0C29\u0C34\u0C3A-\u0C3C\u0C45\u0C49\u0C4E-\u0C54\u0C57\u0C5A-\u0C5F\u0C64\u0C65\u0C70-\u0C77\u0C80\u0C81\u0C84\u0C8D\u0C91\u0CA9\u0CB4\u0CBA\u0CBB\u0CC5\u0CC9\u0CCE-\u0CD4\u0CD7-\u0CDD\u0CDF\u0CE4\u0CE5\u0CF0\u0CF3-\u0D01\u0D04\u0D0D\u0D11\u0D3B\u0D3C\u0D45\u0D49\u0D4F-\u0D56\u0D58-\u0D5F\u0D64\u0D65\u0D76-\u0D78\u0D80\u0D81\u0D84\u0D97-\u0D99\u0DB2\u0DBC\u0DBE\u0DBF\u0DC7-\u0DC9\u0DCB-\u0DCE\u0DD5\u0DD7\u0DE0-\u0DF1\u0DF5-\u0E00\u0E3B-\u0E3E\u0E5C-\u0E80\u0E83\u0E85\u0E86\u0E89\u0E8B\u0E8C\u0E8E-\u0E93\u0E98\u0EA0\u0EA4\u0EA6\u0EA8\u0EA9\u0EAC\u0EBA\u0EBE\u0EBF\u0EC5\u0EC7\u0ECE\u0ECF\u0EDA\u0EDB\u0EE0-\u0EFF\u0F48\u0F6D-\u0F70\u0F98\u0FBD\u0FCD\u0FDB-\u0FFF\u10C6\u10C8-\u10CC\u10CE\u10CF\u1249\u124E\u124F\u1257\u1259\u125E\u125F\u1289\u128E\u128F\u12B1\u12B6\u12B7\u12BF\u12C1\u12C6\u12C7\u12D7\u1311\u1316\u1317\u135B\u135C\u137D-\u137F\u139A-\u139F\u13F5-\u13FF\u169D-\u169F\u16F1-\u16FF\u170D\u1715-\u171F\u1737-\u173F\u1754-\u175F\u176D\u1771\u1774-\u177F\u17DE\u17DF\u17EA-\u17EF\u17FA-\u17FF\u180F\u181A-\u181F\u1878-\u187F\u18AB-\u18AF\u18F6-\u18FF\u191D-\u191F\u192C-\u192F\u193C-\u193F\u1941-\u1943\u196E\u196F\u1975-\u197F\u19AC-\u19AF\u19CA-\u19CF\u19DB-\u19DD\u1A1C\u1A1D\u1A5F\u1A7D\u1A7E\u1A8A-\u1A8F\u1A9A-\u1A9F\u1AAE-\u1AFF\u1B4C-\u1B4F\u1B7D-\u1B7F\u1BF4-\u1BFB\u1C38-\u1C3A\u1C4A-\u1C4C\u1C80-\u1CBF\u1CC8-\u1CCF\u1CF7-\u1CFF\u1DE7-\u1DFB\u1F16\u1F17\u1F1E\u1F1F\u1F46\u1F47\u1F4E\u1F4F\u1F58\u1F5A\u1F5C\u1F5E\u1F7E\u1F7F\u1FB5\u1FC5\u1FD4\u1FD5\u1FDC\u1FF0\u1FF1\u1FF5\u1FFF\u200B-\u200F\u202A-\u202E\u2060-\u206F\u2072\u2073\u208F\u209D-\u209F\u20BB-\u20CF\u20F1-\u20FF\u218A-\u218F\u23F4-\u23FF\u2427-\u243F\u244B-\u245F\u2700\u2B4D-\u2B4F\u2B5A-\u2BFF\u2C2F\u2C5F\u2CF4-\u2CF8\u2D26\u2D28-\u2D2C\u2D2E\u2D2F\u2D68-\u2D6E\u2D71-\u2D7E\u2D97-\u2D9F\u2DA7\u2DAF\u2DB7\u2DBF\u2DC7\u2DCF\u2DD7\u2DDF\u2E3C-\u2E7F\u2E9A\u2EF4-\u2EFF\u2FD6-\u2FEF\u2FFC-\u2FFF\u3040\u3097\u3098\u3100-\u3104\u312E-\u3130\u318F\u31BB-\u31BF\u31E4-\u31EF\u321F\u32FF\u4DB6-\u4DBF\u9FCD-\u9FFF\uA48D-\uA48F\uA4C7-\uA4CF\uA62C-\uA63F\uA698-\uA69E\uA6F8-\uA6FF\uA78F\uA794-\uA79F\uA7AB-\uA7F7\uA82C-\uA82F\uA83A-\uA83F\uA878-\uA87F\uA8C5-\uA8CD\uA8DA-\uA8DF\uA8FC-\uA8FF\uA954-\uA95E\uA97D-\uA97F\uA9CE\uA9DA-\uA9DD\uA9E0-\uA9FF\uAA37-\uAA3F\uAA4E\uAA4F\uAA5A\uAA5B\uAA7C-\uAA7F\uAAC3-\uAADA\uAAF7-\uAB00\uAB07\uAB08\uAB0F\uAB10\uAB17-\uAB1F\uAB27\uAB2F-\uABBF\uABEE\uABEF\uABFA-\uABFF\uD7A4-\uD7AF\uD7C7-\uD7CA\uD7FC-\uF8FF\uFA6E\uFA6F\uFADA-\uFAFF\uFB07-\uFB12\uFB18-\uFB1C\uFB37\uFB3D\uFB3F\uFB42\uFB45\uFBC2-\uFBD2\uFD40-\uFD4F\uFD90\uFD91\uFDC8-\uFDEF\uFDFE\uFDFF\uFE1A-\uFE1F\uFE27-\uFE2F\uFE53\uFE67\uFE6C-\uFE6F\uFE75\uFEFD-\uFF00\uFFBF-\uFFC1\uFFC8\uFFC9\uFFD0\uFFD1\uFFD8\uFFD9\uFFDD-\uFFDF\uFFE7\uFFEF-\uFFFB\uFFFE\uFFFF]/g;function i(e){return"INPUT"===e.nodeName}function s(e){return"TEXTAREA"===e.nodeName}let u;const l=/\n/g;function c(e){u||(u=document.createElement("div"),u.style.pointerEvents="none",u.style.visibility="hidden",u.style.position="absolute",document.documentElement.appendChild(u));const t=e.getBoundingClientRect(),n=e.value;u.style.top=t.top+document.documentElement.scrollTop-e.scrollTop+"px",u.style.left=t.left+document.documentElement.scrollLeft+"px",u.style.width=t.width+"px";const o=window.getComputedStyle(e);u.style.boxSizing=o.boxSizing,u.style.padding=o.padding,u.style.border=`${o.borderWidth} solid black`,u.style.lineHeight=o.lineHeight,u.style.fontSize=o.fontSize,u.style.fontFamily=o.fontFamily,u.innerHTML=n.replace(l,"<br>");const r=n.matchAll(l),a=[];let i,s,c,d,p=0;for(const e of r)p!==e.index&&a.push(n.slice(p,e.index)),a.push("\n"),p=e.index+1;p!==n.length&&a.push(n.slice(p));let m=0;const f=e.selectionStart||0,E=e.selectionEnd||0;a.some(((e,t)=>{const n=m+e.length;if(i||n>f&&(i=u.childNodes[t],s=f-m),i&&n>=E)return c=u.childNodes[t],d=E-m,!0;m=n}));const h=document.createRange();return h.setStart(i,s),h.setEnd(c,d),h}var d=n(321),p=n(300);function m(e){const t=window.getSelection();if(!t)return;const n=function(e=window.getSelection()){let t;if(t=null==e?void 0:e.toString(),!t){const e=document.activeElement;if(e&&(s(e)||i(e))){const{selectionStart:n,selectionEnd:o}=e;null!=n&&null!=o&&(n||o)&&(t=e.value.slice(n,o))}}return t?t.trim().replace(a,""):""}(t);if(!n)return;let u=t.rangeCount>0?t.getRangeAt(0):void 0;if(!u||u.collapsed){const t=document.activeElement;t&&(i(t)||s(t))?u=c(t):e&&e.composed&&(e.path||e.composedPath()).some((e=>{if(e.nodeType===Node.DOCUMENT_FRAGMENT_NODE)return u=function(e){const t=e.getSelection();if(!t||!t.rangeCount)return;const n=t.getRangeAt(0);return n.collapsed?void 0:n}(e),!0}))||(u=void 0)}const l=!u&&e?{x:e.clientX,y:e.clientY,initScrollTop:document.documentElement.scrollTop,initScrollLeft:document.documentElement.scrollLeft}:void 0,d=u||{getBoundingClientRect(){if(l){const e=l.y-(document.documentElement.scrollTop-l.initScrollTop),t=l.x-(document.documentElement.scrollLeft-l.initScrollLeft);return{height:0,width:0,top:e,bottom:e,left:t,right:t}}return{top:100,left:100,width:10,height:10,right:110,bottom:110}}};return{text:n,isTop:r.a,event:e&&Object(o.a)(e,["altKey","metaKey","shiftKey","ctrlKey","clientX","clientY","target"]),rect:r.a?function(){return d.getBoundingClientRect()}:d.getBoundingClientRect()}}function f(e,t){return{type:"HCFY_SELECTION_EVENT_BUBBLE_SELECTION_INFO",data:{selection:m(t),path:[{frameIndex:r.a?-1:Object(d.a)(window.parent.frames,window),scrollTop:document.documentElement.scrollTop,scrollLeft:document.documentElement.scrollLeft}]},meta:e}}const E=document.createElement("style");function h(e){e.target.closest("a")&&(e.preventDefault(),e.stopImmediatePropagation())}E.textContent="a{text-decoration:none !important;cursor:text !important}";var g=n(74),b=n(32),F=n(89),y=n(6),v=n(28);const C=n.n(v)()(r.a?"top frame detector worker":"detector worker"),A=Object(o.a)(y.a,["modifierKeys"]);class w{constructor(e){this.postMsgToTopmostFrame=e?t=>{e(t)}:e=>{window.top.postMessage(JSON.stringify(e),"*")},window.addEventListener("keyup",(e=>{27===e.keyCode&&this.postMsgToTopmostFrame({type:"HCFY_SELECTION_EVENT_ESC_KEY"})})),document.addEventListener("mousedown",(e=>{r.a&&"__hcfy__"===e.target.id||this.postMsgToTopmostFrame({type:"HCFY_SELECTION_EVENT_MOUSEDOWN",event:Object(o.a)(e,["target.id"])})}),!0),window.addEventListener("scroll",(e=>{this.postMsgToTopmostFrame({type:"HCFY_SELECTION_EVENT_SCROLL",event:r.a?e:void 0})}),!0),document.addEventListener("mouseup",(e=>{r.a&&"__hcfy__"===e.target.id||window.setTimeout((()=>{const t=f({reason:"mouseup"},e);this.bubbleInfoMsg(t)}))})),Object(b.a)(A,(({modifierKeys:e})=>{this.removeModifierKeys&&this.removeModifierKeys(),e&&e.length&&(this.removeModifierKeys=Object(F.a)(e,(()=>{this.postMsgToTopmostFrame({type:"HCFY_SELECTION_EVENT_ON_MODIFIER_KEYS_ACTIVE"})}),(()=>{this.postMsgToTopmostFrame({type:"HCFY_SELECTION_EVENT_ON_MODIFIER_KEYS_RELEASED"})}),(()=>{this.postMsgToTopmostFrame({type:"HCFY_SELECTION_EVENT_ON_MODIFIER_KEYS_INTERRUPTED"})})))})),window.addEventListener("message",(({data:e})=>{let t;try{t=JSON.parse(e)}catch(e){return}if(t)if("HCFY_SELECTION_EVENT_BUBBLE_SELECTION_INFO"===t.type){C("接收到子 worker 上报的划词信息",t);const e=function(e){const t=e.data,n=Object(p.a)(t.path);if(!n)return;const o=document.querySelectorAll("iframe, frame")[n.frameIndex];if(!o)return;n.rect=o.getBoundingClientRect();const a=window.getComputedStyle(o);return n.computedStyles={paddingLeft:Number(a.paddingLeft.slice(0,-2)),paddingTop:Number(a.paddingTop.slice(0,-2)),borderLeftWidth:Number(a.borderLeftWidth.slice(0,-2)),borderTopWidth:Number(a.borderTopWidth.slice(0,-2))},t.path.push({frameIndex:r.a?-1:Object(d.a)(window.parent.frames,window),scrollTop:document.documentElement.scrollTop,scrollLeft:document.documentElement.scrollLeft}),e}(t);e&&this.bubbleInfoMsg(e)}else r.a||this.sendMsg(t)}))}sendMsg(e){var t;switch(C(r.a?"接收到来自顶层窗口直接发送的消息":"接收到来自 message 事件的消息",e),e.type){case"HCFY_SELECTION_EVENT_REPORT_INFO_PROACTIVE":const n=f({reason:"proactive",mid:e.mid});return r.a||this.bubbleInfoMsg(n),n;case"HCFY_SELECTION_EVENT_DISABLE_LINK":return document.head.appendChild(E),void window.addEventListener("click",h,!0);case"HCFY_SELECTION_EVENT_ENABLE_LINK":return document.head.contains(E)&&document.head.removeChild(E),void window.removeEventListener("click",h,!0);case"HCFY_SELECTION_EVENT_ENABLE_HOVER_TRANSLATE":return void(this.hs=new g.a((()=>{this.bubbleInfoMsg(f({reason:"hover"}))}),500));case"HCFY_SELECTION_EVENT_DISABLE_HOVER_TRANSLATE":return null===(t=this.hs)||void 0===t||t.destroy(),void delete this.hs}}bubbleInfoMsg(e){if(r.a){const t={type:"HCFY_SELECTION_EVENT_RECEIVE_SELECTION_INFO",data:e.data,meta:e.meta};this.postMsgToTopmostFrame(t)}else window.parent.postMessage(JSON.stringify(e),"*")}}},15:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));const o=window.top===window},161:function(e,t,n){"use strict";String.prototype.matchAll||(String.prototype.matchAll=function*(e){const t=new RegExp(e,e.flags),n=this.toString();let o;for(;o=t.exec(n);)yield o})},162:function(e,t,n){var o=n(122)(!1);o.push([e.i,"#root{-webkit-text-size-adjust:100%;box-sizing:border-box;font-size:14px;font-weight:400;letter-spacing:0;line-height:1.28581;text-transform:none;color:#182026;font-family:-apple-system, 'BlinkMacSystemFont', 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Open Sans', 'Helvetica Neue', 'Icons16', sans-serif}\n",""]),e.exports=o},212:function(e,t,n){var o=n(301);e.exports="string"==typeof o?o:o.toString()},23:function(e,t,n){"use strict";function o(e){return`${e.host}${e.path}`}function r(e){const t=e.match(/^([^:]+):\/\/([^/]+)?(\/.*)?$/);if(!t)return;let n=t[2]||"";const o=n.indexOf(":");o>=0&&(n=n.slice(0,o));let r=t[3]||"";const a=r.indexOf("#");if(a>=0&&(r=r.slice(0,a)),!n.startsWith(".")){if(!r){if(!n)return;r="/"}return{host:n,path:r}}}function a(e,t){return new RegExp("^"+e.replace(/[-[\]{}()+?.,\\^$|#\s]/g,"\\$&").replace("*",".*").replace(/^\.\*\\\./,"(.*\\.)?")+"$").test(t)}function i(e,t){return new RegExp("^"+e.replace(/[-[\]{}()+?.,\\^$|#\s]/g,"\\$&").replace(/\*/g,".*")+"$").test(t)}function s(e,t){let n;if(n="string"==typeof t?r(t):t,n)return{isHostMatch:{ruleHost:e.host,urlHost:n.host,matches:a(e.host,n.host)},isPathMatch:{rulePath:e.path,urlPath:n.path,matches:i(e.path,n.path)}}}function u(e,t,n){let o,s;o="string"==typeof e?r(e):e;let u=!1,l=!1;if(o){const e=e=>{const t=function(e,t){let n;if(n="string"==typeof t?r(t):t,n)return a(e.host,n.host)&&i(e.path,n.path)}(e,o);return t&&(s=e),t};u=n.some(e),u||(l=t.some(e))}return{urlParts:o,matchedRule:s,whiteListMatched:u,blackListMatched:l}}function l(e,t,n){const o=u(e,t,n);return!o.urlParts||o.whiteListMatched||!o.blackListMatched}n.d(t,"e",(function(){return o})),n.d(t,"a",(function(){return r})),n.d(t,"d",(function(){return s})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return l}))},268:function(e,t,n){e.exports=n(319)},301:function(e,t,n){var o=n(122),r=n(302),a=n(303),i=n(304),s=o(!1),u=r(a),l=r(i);s.push([e.i,"#translate-panel{background-color:#f5f8fa}.bp3-dark #translate-panel{background-color:#293742}#translate-panel.size-small,#translate-panel.size-small h6.bp3-heading,#translate-panel.size-small .bp3-control.bp3-large,#translate-panel.size-small textarea.bp3-input.bp3-small{font-size:14px}#translate-panel.size-small .phonetic-item,#translate-panel.size-small .quick-settings a{font-size:12px}#translate-panel.size-middle,#translate-panel.size-middle h6.bp3-heading,#translate-panel.size-middle .bp3-control.bp3-large,#translate-panel.size-middle textarea.bp3-input{font-size:18px}#translate-panel.size-middle .phonetic-item,#translate-panel.size-middle .quick-settings a{font-size:14px}#translate-panel.size-large,#translate-panel.size-large h6.bp3-heading,#translate-panel.size-large .bp3-control.bp3-large,#translate-panel.size-large textarea.bp3-input.bp3-large{font-size:22px}#translate-panel.size-large .source,#translate-panel.size-large .phonetic-item,#translate-panel.size-large .quick-settings a{font-size:18px}#translate-panel .bp3-button.bp3-small,#translate-panel .bp3-small .bp3-button{min-height:20px;min-width:20px}#translate-panel .header{display:flex;align-items:center;padding:4px 6px 4px 10px;border-bottom:1px solid #d1d1d1}.bp3-dark #translate-panel .header{border-bottom-color:rgba(16,22,26,0.4)}#translate-panel .header .drag-block{min-width:5px;flex-shrink:0;flex-grow:1;align-self:stretch}#translate-panel .header .right{display:flex;align-items:center}#translate-panel .header .right .bp3-icon-arrow-right{flex-shrink:0;margin:0 5px}#translate-panel .header .right>.bp3-button{flex-shrink:0;margin:0 1px}#translate-panel .header .right>.bp3-button:last-child{margin-right:0}#translate-panel .quick-settings{padding:4px 9px;margin:0 1px}#translate-panel .quick-settings>div{margin-bottom:5px}#translate-panel .quick-settings .bp3-control{margin-bottom:0}#translate-panel .query-text{padding:10px 10px 2px 10px}#translate-panel .query-text textarea.bp3-input{min-height:44px;font-family:system-ui, -apple-system, 'Segoe UI', 'Roboto', 'Ubuntu', 'Cantarell', 'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji'}#translate-panel .body{padding:0 10px}#translate-panel .body .no-api{margin:20px 0}.result-block{margin:8px 0;padding:2px 5px}.result-block .bp3-button{visibility:hidden}.result-block .error .bp3-button,.result-block:hover .bp3-button{visibility:visible}.result-block .legend{display:flex;align-items:center;justify-content:space-between}.result-block .legend .legend-left{display:flex;align-items:center}.result-block .legend .api-ico,.result-block .legend .bp3-heading{flex-shrink:0;white-space:nowrap}.result-block .legend .api-ico{display:inline-block;width:14px;height:14px;background-size:contain;margin-right:3px}.result-block .legend .bp3-heading{margin-bottom:0;margin-right:10px}.result-block .legend .source{cursor:pointer;font-size:12px}.result-block .legend .source .bp3-icon{position:relative;top:-1px;margin-left:1px}.result-block .phonetic{display:flex;flex-wrap:wrap}.result-block .phonetic .phonetic-item{display:flex;align-items:center;font-size:12px}.result-block .phonetic .phonetic-item:not(:last-child){margin-right:12px}.result-block .phonetic .phonetic-item>span:first-child{margin-right:7px}.result-block .common-result p{line-height:1.3;margin:2px 0}.result-block .common-result .dict a{text-decoration:underline}.result-block .error{font-size:12px;padding:0 10px 5px 10px}.result-block .dict-pos{margin-right:5px}.external-translators{margin-bottom:3px;padding:0;display:flex;flex-wrap:wrap}.external-translators>div{margin:0 5px 5px 0}#popper-container{width:250px;position:absolute;left:0;top:0;z-index:9999999999;touch-action:none;transition:opacity 0.2s;background-color:#f5f8fa}.bp3-dark #popper-container{background-color:#293742}#popper-container.show{opacity:1;pointer-events:auto;user-select:auto}#popper-container,#popper-container[data-popper-reference-hidden='true']{opacity:0;pointer-events:none;user-select:none}#popper-container .drag-block{cursor:grab}#popper-container.pin{position:fixed}#popper-container.pin .arrow{display:none}#popper-container .arrow,#popper-container .arrow::before{position:absolute;width:8px;height:8px;z-index:-1}#popper-container .arrow::before{content:'';transform:rotate(45deg);background:#f5f8fa}.bp3-dark #popper-container .arrow::before{background-color:#293742}#popper-container .arrow{display:none}#popper-container.show[data-popper-placement]:not([data-popper-reference-hidden='true']) .arrow{display:block}#popper-container[data-popper-placement^='top'] .arrow{bottom:-5px}#popper-container[data-popper-placement^='top'] .arrow::before{border-right:1px solid #d1d1d1;border-bottom:1px solid #d1d1d1}#popper-container[data-popper-placement^='bottom'] .arrow{top:-5px}#popper-container[data-popper-placement^='bottom'] .arrow::before{border-left:1px solid #d1d1d1;border-top:1px solid #d1d1d1}#popper-container[data-popper-placement^='left'] .arrow{right:-5px}#popper-container[data-popper-placement^='left'] .arrow::before{border-right:1px solid #d1d1d1;border-top:1px solid #d1d1d1}#popper-container[data-popper-placement^='right'] .arrow{left:-5px}#popper-container[data-popper-placement^='right'] .arrow::before{border-left:1px solid #d1d1d1;border-bottom:1px solid #d1d1d1}#translate-btn{display:none;position:absolute;z-index:9999999999;left:0;top:0}#translate-btn .bp3-button{padding:2px;min-width:0;min-height:0}#translate-btn .btn-icon{width:18px;height:18px;background-image:url("+u+");background-size:contain}.bp3-dark #translate-btn .btn-icon{background-image:url("+l+")}#translate-btn.show{display:block}#app{cursor:default}.switch-pin{flex-shrink:0;cursor:pointer}.switch-pin .bp3-icon-pin{transition:transform 0.2s, color 0.2s;transform:rotate(-45deg)}.pin .switch-pin .bp3-icon-pin{transform:rotate(-70deg)}\n",""]),e.exports=s},303:function(e,t,n){"use strict";n.r(t),t.default=n.p+"logo.png"},304:function(e,t,n){"use strict";n.r(t),t.default=n.p+"logowhite36.png"},319:function(e,t,n){"use strict";n.r(t);var o=n(0),r=n.n(o),a=n(16),i=n.n(a),s=n(133),u=n(132),l=(n(65),n(107));Object(u.a)(),Object(s.a)(),function(){if(window.location.origin+window.location.pathname!=="http://fanyi.youdao.com/")return;const e=Object(l.a)(window.location.hash);if(!e.hcfy_text)return;const t=document.getElementById("inputOriginal");if(t&&(t.value=decodeURIComponent(e.hcfy_text)),!e.hcfy_from){const e=document.getElementById("transMachine");return void(e&&e.click())}const n=document.getElementById("languageSelect");if(!n)return;const o=e.hcfy_from+"2"+e.hcfy_to,r=n.querySelector(`li[data-value=${o}] a`);r&&r.click()}();var c=n(125),d=n(109),p=n(3),m=n.n(p),f=n(173),E=n(340);const h="static"!==getComputedStyle(document.documentElement).position;var g=n(117),b=n.n(g);function F(){return{edges:{left:!0,right:!0,bottom:!1,top:!1},modifiers:[b.a.modifiers.restrictSize({min:{width:250,height:100}})]}}function y(e){if(!e||!e.startsWith("translate"))return null;const t=e.startsWith("translate3d"),n=e.replace("translate"+(t?"3d":""),"").match(/-?\d+(\.\d+)?/g);if(!n)return null;const o=Number(n[0]),r=Number(n[1]);return Number.isNaN(o)||Number.isNaN(r)?null:{x:o,y:r,is3d:t}}function v(e){return`translate${e.is3d?"3d":""}(${Math.round(e.x)}px,${Math.round(e.y)}px${e.is3d?",0":""})`}var C=n(10),A=n(86),w=n(6),x=n(28),O=n.n(x);function B(e,t){switch(t.type){case"overload":return t.payload;case"incremental":if(!e||!t.payload.placement)return e;const n=y(e.transform);if(!n)throw new Error("未解析到箭头的位置信息");return t.payload.placement.startsWith("bottom")||t.payload.placement.startsWith("top")?n.x=n.x-t.payload.x:(t.payload.placement.startsWith("left")||t.payload.placement.startsWith("right"))&&(n.y=n.y-t.payload.y),{...e,transform:v(n)}}}var D=n(344),T=n(36),S=n.n(T);function N(e,t){const n=e.pos;switch(t.type){case"setWidth":const o=e.width,r=t.payload;return o===r?e:{...e,width:r};case"readWidth":return t.payload(e.width),e;case"setPosSafe":const{pos:a,containerWidth:i=0,containerHeight:s=0}=t.payload;let u=a.x;const l=u+i-window.innerWidth;l>0&&(u-=l),u<0&&(u=0);let c=a.y;if(s){const e=c+s-window.innerHeight;e>0&&(c-=e)}return c<0&&(c=0),u===n.x&&c===n.y?null==e.otherStyles?e:{...e,otherStyles:null}:{...e,pos:{x:u,y:c,is3d:n.is3d},otherStyles:null};case"readPos":return t.payload(e.pos),e;case"importPopperStyles":const d=t.payload,p={pos:y(d.transform)||{x:0,y:0,is3d:!1},otherStyles:d};return S()(p,Object(A.a)(e,["pos","otherStyles"]))?e:{...e,...p};case"incrementalPos":const{dx:m,dy:f}=t.payload;return 0===m&&0===f?e:{...e,pos:{x:n.x+m,y:n.y+f,is3d:n.is3d}};case"switch2fixed":const{pageXOffset:E,pageYOffset:g}=window,b={...e,otherStyles:null};return h||0===E&&0===g||(b.pos={x:n.x-E,y:n.y-g,is3d:n.is3d}),b;default:return e}}const _=O()("popperContainer"),k=Object(A.a)(w.a,["width","pinPos"]);var j=Object(o.forwardRef)((function(e,t){const{pin:n,setPin:a,range:i,show:s,placement:u}=e,l=Object(o.useRef)(null),c=Object(o.useRef)(null),d=Object(o.useMemo)((()=>s&&!n&&i?i:null),[i,s,n]),[p,g]=Object(o.useReducer)(N,{width:k.width,pos:{x:0,y:0,is3d:!1},otherStyles:null}),[y,w]=Object(C.a)(k),x=y?y.width:k.width,O=e=>{_("保存窗口宽度",e),w({width:e})};Object(o.useEffect)((()=>{_("同步 storage 中的宽度",x),g({type:"setWidth",payload:x})}),[x]);const T=y?y.pinPos:k.pinPos,S=e=>{const t=e&&Object(A.a)(e,["x","y"]);_("保存窗口位置",t),w({pinPos:t})},j=()=>{n?g({type:"readPos",payload:S}):_("保存窗口位置时由于不是 pin 状态，取消保存")};Object(o.useEffect)((()=>{var e,t;null!=T&&(_("同步 storage 里的窗口位置",T),g({type:"setPosSafe",payload:{pos:T,containerWidth:null===(e=l.current)||void 0===e?void 0:e.clientWidth,containerHeight:null===(t=l.current)||void 0===t?void 0:t.clientHeight}}))}),[T]),Object(o.useEffect)((()=>{if(n){const e=function(){var e,t;T&&(_("resize 时同步 storage 里的窗口位置",T),g({type:"setPosSafe",payload:{pos:T,containerWidth:null===(e=l.current)||void 0===e?void 0:e.clientWidth,containerHeight:null===(t=l.current)||void 0===t?void 0:t.clientHeight}}))};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}}),[n,T]);const[L,I]=Object(o.useReducer)(B,null),{realtimePlacement:R,updatePopper:P,popperStyles:M,popperAttrs:z,arrowStyles:H}=function(e,t,n,o){const{styles:r,attributes:a,update:i,state:s}=Object(E.a)(e,t,{placement:o,strategy:h?"fixed":void 0,modifiers:[{name:"arrow",options:{element:n}},{name:"computeStyles",options:{adaptive:!1}},{name:"offset",options:{offset:[0,12]}},{name:"preventOverflow",options:{altAxis:!0}}]});return{realtimePlacement:e&&(null==s?void 0:s.placement)||null,updatePopper:e?i:null,popperStyles:e?r.popper:null,popperAttrs:e?a.popper:null,arrowStyles:e?r.arrow:null}}(d,l.current,c.current,u);Object(o.useEffect)((()=>{I({type:"overload",payload:H})}),[H]),Object(D.a)((()=>{M&&(_("导入 popperjs 的样式",M),g({type:"importPopperStyles",payload:M}))}),[M]);const K=function(e,t,n,r){const[a,i]=Object(o.useState)(null),[s,u]=Object(o.useState)(!1);return Object(o.useEffect)((()=>{if(!e)return;const t=b()(e);return t.resizable({...F(),inertia:!0,onstart(){u(!0)}}),i(t),()=>{t.unset(),i(null)}}),[e]),Object(o.useEffect)((()=>{if(!a)return;let e;if(t){const n=t.indexOf("-");switch(e=n>0?t.slice(0,n):t,e){case"top":e="bottom";break;case"bottom":e="top";break;case"left":e="right";break;case"right":e="left"}if("top"===e||"bottom"===e)return}const n=F();e&&(n.edges[e]=!1),a.set({resize:n})}),[t,a]),Object(o.useEffect)((()=>{if(!a)return;const e=function(e){n(e.rect.width,e.deltaRect.left,e.deltaRect.top)};return a.on("resizemove",e),()=>{a.off("resizemove",e)}}),[n,a]),Object(o.useEffect)((()=>{if(!a)return;const e=function(){u(!1),r()};return a.on("resizeend",e),()=>{a.off("resizeend",e)}}),[a,r]),s}(l.current,R,((e,t,n)=>{g({type:"setWidth",payload:e}),g({type:"incrementalPos",payload:{dx:t,dy:n}}),I({type:"incremental",payload:{x:t,y:n,placement:R}})}),(()=>{g({type:"readWidth",payload:O}),j()}));!function(e,t,n,r,a){const[i,s]=Object(o.useState)(null),[u,l]=Object(o.useState)(!1);Object(o.useEffect)((()=>{if(!e)return;const n=e.querySelector(t);if(!n)return;const o=b()(n);return o.draggable({inertia:!0,modifiers:[b.a.modifiers.restrictRect({restriction:()=>{const t=n.getBoundingClientRect(),o=e.getBoundingClientRect();return{x:t.left-o.left,y:window.pageYOffset+(t.top-o.top),width:window.innerWidth+(t.width-o.width)-(window.innerWidth-document.documentElement.clientWidth),height:window.innerHeight+(t.height-o.height)-(window.innerHeight-document.documentElement.clientHeight)}},endOnly:!0})]}).styleCursor(!1),s(o),()=>{o.unset(),s(null)}}),[e,t]),Object(o.useEffect)((()=>{if(!i)return;const e=()=>{l(!0),n()};return i.on("dragstart",e),()=>{i.off("dragstart",e)}}),[i,n]),Object(o.useEffect)((()=>{if(!i)return;const e=e=>{r(e.dx,e.dy)};return i.on("dragmove",e),()=>{i.off("dragmove",e)}}),[i,r]),Object(o.useEffect)((()=>{if(!i)return;const e=()=>{l(!1),a()};return i.on("dragend",e),()=>{i.off("dragend",e)}}),[i,a])}(l.current,".drag-block",(()=>{a((e=>(e||(_("拖拽过程中将窗口转为固定模式位置"),g({type:"switch2fixed"})),!0)))}),((e,t)=>{g({type:"incrementalPos",payload:{dx:e,dy:t}})}),(()=>{j()})),Object(o.useImperativeHandle)(t,(()=>({switch2pin(){_("主动调用 switch2pin 方法转为固定模式"),g({type:"switch2fixed"}),j()},clearPos(){_("由于转为了非固定模式，所以清空了 storage 里的位置"),S(null),window.setTimeout((()=>{P&&P()}))}})));const Y=Object(o.useMemo)((()=>{const e={...p.otherStyles,width:p.width,transform:v(p.pos)};return _("合成 container 样式",e),e}),[p]);return r.a.createElement("div",Object.assign({id:"popper-container",ref:l,style:Y},z,{className:m()({show:s,pin:n},"bp3-elevation-4")}),r.a.createElement(f.G,{onResize:()=>{!K&&P&&P()}},e.children),r.a.createElement("div",{className:"arrow",ref:c,style:L||void 0}))})),L=n(63);const I=function(e){e.preventDefault()},R=Object(A.a)(w.a,["buttonAutoClose"]);function P(e){const{btnPos:t,setBtnPos:n,onBtnClick:a}=e,i=t?"show":void 0,[s]=Object(C.a)(R),u=Object(o.useRef)(),[l,c]=Object(o.useState)(!1),d=t?{transform:`translate(${t.x+10}px,${t.y+10}px)`}:void 0;return Object(o.useEffect)((()=>{if(!(null==s?void 0:s.buttonAutoClose))return c(!1),void window.clearTimeout(u.current);t?l?window.clearTimeout(u.current):u.current=window.setTimeout((()=>{n(null)}),2e3):(c(!1),window.clearTimeout(u.current))}),[t,l,n,null==s?void 0:s.buttonAutoClose]),r.a.createElement("div",{id:"translate-btn",className:i,style:d,onMouseDown:I,onMouseEnter:()=>{c(!0)},onMouseLeave:()=>{c(!1)}},r.a.createElement(f.d,{icon:r.a.createElement("span",{className:"btn-icon"}),onClick:a}))}var M=n(74),z=n(56),H=n(23),K=n(49),Y=n(89),V=n(335),W=n(300),U=n(156),$=n(128);const q=O()("detector master");function J(e){const t=e.selection;let n=null;if(t){const o=t.text,r=t.event;let a,i,s;if("function"==typeof t.rect)a=t.rect(),i={getBoundingClientRect:t.rect},s=r?{x:r.clientX+e.path[0].scrollLeft,y:r.clientY+e.path[0].scrollTop}:null;else{s=r?{x:r.clientX,y:r.clientY}:null;const n=e.path;a=Object(A.a)(t.rect,["top","left","width","height","right","bottom"]),Object(V.a)(n,(e=>{if(e.rect&&e.computedStyles){const t=e.rect.left+e.computedStyles.paddingLeft+e.computedStyles.borderLeftWidth,n=e.rect.top+e.computedStyles.paddingTop+e.computedStyles.borderTopWidth;a.left+=t,a.top+=n,s&&(s.x+=t,s.y+=n)}})),a.right=a.left+a.width,a.bottom=a.top+a.height,i={getBoundingClientRect:()=>a};const o=Object(W.a)(e.path);s=s?{x:s.x+o.scrollLeft,y:s.y+o.scrollTop}:null}n={text:o,mouseUpEvent:r,isTop:t.isTop,range:i,btnPos:s}}return{parsedData:n,activeFrameIndex:e.path.map((e=>e.frameIndex))}}const X=Object(A.a)(w.a,["button","domainBlackList","domainWhiteList","textList","placement","pin","pinPos","showTextArea","panelSize","modifierKeys","modifierKeyPressedAction","modifierKeyTranslate","modifierKeyLink"]);function Z(e,t,n,o){return!(!e&&!n)&&!(null==o?void 0:o.some((e=>e.test(t))))}function G(e){const{pin:t,onClick:n,size:o}=e;return r.a.createElement("div",{className:"switch-pin",onClick:n},r.a.createElement(f.d,{icon:r.a.createElement(f.t,{icon:"pin",iconSize:L.a[o]}),small:"small"===o,large:"large"===o,minimal:!0,active:t}))}const Q=new class{constructor(){this.topParsedData=null,this.activeFrameIndex=null,this.msgMap=new Map,this.listeners=null,this.topWorker=new $.a((e=>{q("收到来自顶层 worker 发送的消息",e),this.sendMsg(e)})),window.addEventListener("message",(({data:e})=>{let t;try{t=JSON.parse(e)}catch(e){return}t&&(q("收到来自 iframe worker 发送的消息",t),this.sendMsg(t))}))}sendMsg(e){var t,n,o,r,a,i,s,u,l;switch(e.type){case"HCFY_SELECTION_EVENT_MOUSEDOWN":this.clearSelectionData(),null===(t=this.listeners)||void 0===t||t.onMouseDown(e.event);break;case"HCFY_SELECTION_EVENT_RECEIVE_SELECTION_INFO":const{parsedData:c,activeFrameIndex:d}=J(e.data);this.topParsedData=(null==c?void 0:c.isTop)?c:null,this.activeFrameIndex=d;const{reason:p}=e.meta;if("mouseup"===p)c&&(null===(n=this.listeners)||void 0===n||n.onMouseUp(c,c.mouseUpEvent));else if("hover"===p)c&&(null===(o=this.listeners)||void 0===o||o.onHoverSelection(c));else if("proactive"===p){const t=e.meta.mid;if(t){const e=this.msgMap.get(t);e&&(this.msgMap.delete(t),e(c||void 0))}}break;case"HCFY_SELECTION_EVENT_SCROLL":if(this.topParsedData)null===(r=this.listeners)||void 0===r||r.onScroll(this.topParsedData,e.event);else if(this.isTopFrameActivated()){const t=this.getInfoSync();t&&(null===(a=this.listeners)||void 0===a||a.onScroll(t,e.event))}else this.getInfo().then((t=>{var n;t&&(null===(n=this.listeners)||void 0===n||n.onScroll(t,e.event))}));break;case"HCFY_SELECTION_EVENT_ESC_KEY":this.clearSelectionData(),null===(i=this.listeners)||void 0===i||i.onEsc();break;case"HCFY_SELECTION_EVENT_ON_MODIFIER_KEYS_ACTIVE":null===(s=this.listeners)||void 0===s||s.onModifierKeysActive();break;case"HCFY_SELECTION_EVENT_ON_MODIFIER_KEYS_RELEASED":null===(u=this.listeners)||void 0===u||u.onModifierKeysReleased();break;case"HCFY_SELECTION_EVENT_ON_MODIFIER_KEYS_INTERRUPTED":null===(l=this.listeners)||void 0===l||l.onModifierKeysInterrupted()}}isTopFrameActivated(){var e;return-1===(null===(e=this.activeFrameIndex)||void 0===e?void 0:e[0])}getInfoSync(){const e=this.topWorker.sendMsg({type:"HCFY_SELECTION_EVENT_REPORT_INFO_PROACTIVE",mid:"sync"});if(e)return J(e.data).parsedData}getInfo(){return new Promise((e=>{if(!this.activeFrameIndex)return void e(void 0);if(this.isTopFrameActivated())return void e(this.getInfoSync());const t=this.activeFrameIndex.reduceRight(((e,t)=>e?-1===t?e:e.frames[t]:null),window);if(t){const n=Object(U.a)();this.msgMap.set(n,e),t.postMessage(JSON.stringify({type:"HCFY_SELECTION_EVENT_REPORT_INFO_PROACTIVE",mid:n}),"*")}}))}clearSelectionData(){this.topParsedData=null}sendToAllFrames(e){this.topWorker.sendMsg(e),function t(n){Object(V.a)(n,(n=>{n.postMessage(JSON.stringify(e),"*"),t(n.frames)}))}(window.frames)}disableLink(){this.sendToAllFrames({type:"HCFY_SELECTION_EVENT_DISABLE_LINK"})}enableLink(){this.sendToAllFrames({type:"HCFY_SELECTION_EVENT_ENABLE_LINK"})}enableHoverTranslate(){this.sendToAllFrames({type:"HCFY_SELECTION_EVENT_ENABLE_HOVER_TRANSLATE"})}disableHoverTranslate(){this.sendToAllFrames({type:"HCFY_SELECTION_EVENT_DISABLE_HOVER_TRANSLATE"})}};var ee=Object(o.forwardRef)((function(e,t){const{hostRef:n}=e,[a,i]=Object(C.a)(X),s=null==a?void 0:a.button,u=null==a?void 0:a.domainBlackList,l=null==a?void 0:a.domainWhiteList,c=null==a?void 0:a.textList,p=(null==a?void 0:a.placement)||X.placement,m=(null==a?void 0:a.pin)||X.pin,E=(null==a?void 0:a.panelSize)||X.panelSize,h="small"===E,g="large"===E,b=Object(o.useMemo)((()=>null==c?void 0:c.reduce(((e,t)=>(t.enabled&&e.push(new RegExp(t.value)),e)),[])),[c]),F=(()=>{const e=window.location.href;return!!Object(K.a)(e)||(void 0!==l&&void 0!==u?Object(H.c)(e,u,l):void 0)})(),[y,v]=Object(o.useState)(null),[A,w]=Object(o.useState)(!1),x=Object(o.useRef)(null),[O,B]=Object(o.useState)(),[D,T]=Object(o.useState)(!1),[S,N]=Object(o.useState)(""),_=Object(o.useRef)(null);async function k(){const e=await Q.getInfo();e&&(B(e.range),N(e.text),w(!0))}Object(z.a)(_.current),Object(o.useEffect)((()=>{if(!_.current)throw new Error("找不到 app root 元素");const e=new d.a(_.current,"bp3-focus-disabled");return e.start(),()=>{e.stop()}}),[]);const I=Object(o.useCallback)((()=>{v(null),k()}),[]);Object(o.useImperativeHandle)(t,(()=>({translate:I,async getSelectionText(){const e=await Q.getInfo();return(null==e?void 0:e.text)||""}})),[I]),Object(o.useEffect)((()=>{function e(){Q.enableLink(),"hover"===(null==a?void 0:a.modifierKeyPressedAction)&&T(!1)}void 0!==F&&void 0!==s&&b&&(Q.listeners={onMouseUp(e,t){const n=t&&"selection"===(null==a?void 0:a.modifierKeyPressedAction)&&Object(Y.b)(t,a.modifierKeys);Z(F,e.text,n||!1,b)&&(A||!s||n?k():v(e.btnPos))},onMouseDown(){v(null),m||w(!1)},onScroll(e,t){e.isTop&&(null==t?void 0:t.target)===document||B(e.isTop?Object.assign({},e.range):e.range)},onEsc(){v(null),w(!1)},onModifierKeysActive(){(null==a?void 0:a.modifierKeyLink)&&Q.disableLink(),"hover"===(null==a?void 0:a.modifierKeyPressedAction)&&T(!0)},onModifierKeysReleased(){e(),(null==a?void 0:a.modifierKeyTranslate)&&I()},onModifierKeysInterrupted(){e()},onHoverSelection(e){Z(!0,e.text,!1,b)&&k()}})}),[s,F,n,b,A,null==a?void 0:a.modifierKeyLink,null==a?void 0:a.modifierKeyPressedAction,null==a?void 0:a.modifierKeyTranslate,null==a?void 0:a.modifierKeys,m,I]),Object(o.useEffect)((()=>{M.b||(D?Q.enableHoverTranslate():Q.disableHoverTranslate())}),[D]);return r.a.createElement("div",{id:"app",ref:_},a&&r.a.createElement(r.a.Fragment,null,r.a.createElement(P,{btnPos:y,setBtnPos:v,onBtnClick:I}),r.a.createElement(j,{show:A,pin:m,setPin:e=>{i("function"==typeof e?t=>{t.pin=e(t.pin)}:{pin:e})},range:O,placement:p,ref:x},r.a.createElement(L.b,{headerLeft:r.a.createElement(G,{pin:m,onClick:()=>{i((e=>{const t=!e.pin;e.pin=t,window.setTimeout((()=>{var e,n;t?null===(e=x.current)||void 0===e||e.switch2pin():null===(n=x.current)||void 0===n||n.clearPos()}))}))},size:E}),headerRight:r.a.createElement(f.d,{icon:r.a.createElement(f.t,{icon:"cross",iconSize:L.a[E]+4,onClick:()=>{w(!1)}}),small:h,large:g,minimal:!0,title:"关闭(Esc)"}),extendOptions:r.a.createElement(r.a.Fragment,null,r.a.createElement(f.g,{inline:!0,large:g,label:"显示文本框",checked:a.showTextArea,onChange:e=>{i({showTextArea:e.target.checked})}}),r.a.createElement(f.g,{large:g,style:{marginRight:"0"},disabled:M.b,label:"鼠标悬浮取词",inline:!0,checked:D,onChange:()=>T((e=>!e))})),showTextArea:a.showTextArea,queryText:S,size:E}))))})),te=n(127),ne=n.n(te),oe=n(212),re=n.n(oe),ae=Object(o.forwardRef)((function(e,t){const n=Object(o.useRef)(null),a=Object(o.useRef)(null);return Object(o.useImperativeHandle)(t,(()=>a),[]),r.a.createElement(c.a.div,{ref:n,style:{all:"initial"},id:"__hcfy__"},r.a.createElement("style",null,ne.a),r.a.createElement("link",{rel:"stylesheet",href:browser.runtime.getURL("normalize.css")}),r.a.createElement("link",{rel:"stylesheet",href:browser.runtime.getURL("blueprint.css")}),r.a.createElement("link",{rel:"stylesheet",href:browser.runtime.getURL("blueprint-select.css")}),r.a.createElement("style",null,re.a.replace(/url\((["']?)(.*?)\1\)/g,(function(e,t,n){return n.startsWith("data:")?e:`url(${browser.runtime.getURL(n)})`}))),r.a.createElement("div",{id:"root"},r.a.createElement(ee,{ref:a,hostRef:n})))}));const ie=document.createElement("div");ie.style.all="initial",document.documentElement.appendChild(ie),i.a.render(r.a.createElement((function(){const e=Object(o.useRef)(null);return Object(o.useEffect)((()=>{browser.runtime.onMessage.addListener((t=>{var n,o,r,a;switch(t){case"translate":return void(null===(o=null===(n=e.current)||void 0===n?void 0:n.current)||void 0===o||o.translate());case"getSelectionText":return Promise.resolve(null===(a=null===(r=e.current)||void 0===r?void 0:r.current)||void 0===a?void 0:a.getSelectionText())}}))}),[]),r.a.createElement(ae,{ref:e})}),null),ie)},49:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}));const o=browser.runtime.getURL("/pdf-viewer/web/viewer.html");function r(e){return e.startsWith(o)}function a(e=""){browser.tabs.create({url:o+e})}},57:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a}));const o=window.navigator.userAgent,r=o.includes("Mac"),a=o.includes("Edg")},63:function(e,t,n){"use strict";n.d(t,"a",(function(){return R}));n(161);var o=n(0),r=n.n(o),a=n(173),i=n(111),s=n(86),u=n(129),l=n(300),c=n(10),d=n(6),p=n(45);const m=Object(s.a)(d.a,"selectedAPIs");function f(){const[e,t]=Object(c.a)(m);return r.a.createElement(r.a.Fragment,null,p.a.map((n=>r.a.createElement(a.x,{key:n.value,text:n.name,onClick:()=>(e=>{const n=e.value;t((e=>{const t=e.selectedAPIs;t.indexOf(n)<0&&t.push(n)}))})(n),disabled:!e||e.selectedAPIs.includes(n.value)}))))}var E=n(14),h=n(156);let g="";const b=document.querySelector('link[rel=icon],link[rel="shortcut icon"]');g=b?b.href:window.location.origin+"/favicon.ico";const F=Object(E.b)(((e,t)=>{switch(t.type){case"save translate record":const n=Date.now(),o=Object(h.a)(n+"-");return e.translateId=o,void browser.runtime.sendMessage({action:"save history record",record:{text:t.text,date:n,url:window.location.href,title:document.title,favicon:g}})}}));var y=n(52);const v={small:12,middle:16,large:20};function C(){browser.runtime.sendMessage({action:"open options page",suffix:"?vip#/#通用设置"})}function A(){browser.runtime.sendMessage({action:"open options page"})}function w(e){const{source:t,setSource:n,options:o,setOptions:i,user:s,children:u,rightOffset:l,size:c}=e;if(!o)return null;const d="large"===c,m=(e,t)=>{i((n=>{const o=n[t],r=o.indexOf(e);r>=0?o.splice(r,1):4===o.length&&o.pop(),o.unshift(e)}))};return r.a.createElement(a.f,{className:"quick-settings"},r.a.createElement("div",null,r.a.createElement(y.a,{lang:t,setLang:e=>{n(e),m(e,"recentUseLangFrom")},addAuto:!0,recentUse:o.recentUseLangFrom,size:c}),r.a.createElement(a.t,{icon:"arrow-right",iconSize:v[c],style:{margin:"0 10px"}}),r.a.createElement(y.a,{lang:o.destination,setLang:e=>{i({destination:e}),m(e,"recentUseLangTo")},offset:l,recentUse:o.recentUseLangTo,size:c})),r.a.createElement("div",null,p.a.map((e=>r.a.createElement(a.g,{inline:!0,label:"DeepL"===e.name?"DeepL":e.name.slice(0,2),large:d,key:e.value,checked:o.selectedAPIs.includes(e.value),onChange:t=>((e,t)=>{const n=e.value;i((e=>{const o=e.selectedAPIs,r=o.indexOf(n);t?r<0&&o.push(n):r>=0&&o.splice(r,1)}))})(e,t.target.checked)})))),r.a.createElement("div",null,r.a.createElement(a.g,{inline:!0,label:"自动朗读",large:d,checked:o.autoPlay,onChange:e=>{i({autoPlay:e.target.checked})}}),r.a.createElement(a.N,{interactionKind:"hover",hoverCloseDelay:300,enforceFocus:!1,usePortal:!1,disabled:(null==s?void 0:s.vipActivated)||!1,content:r.a.createElement(r.a.Fragment,null,"这是一个会员功能，请在",r.a.createElement("a",{onClick:C},"开通会员"),"后使用。")},r.a.createElement(a.g,{inline:!0,label:"自动复制",disabled:!(null==s?void 0:s.vipActivated),checked:o.autoCopy,onChange:e=>{i({autoCopy:e.target.checked})}}))),u&&r.a.createElement("div",null,u),r.a.createElement("a",{onClick:A,className:"bp3-text-small"},"打开完整设置"))}var x=n(298),O=n(202);const B={},D=(e,t)=>Object(E.b)(e,(e=>{switch(t.type){case"set loading":return void(t.value?e[t.apiId]={loading:!0,result:{data:null,error:null}}:Object(x.a)(e,[t.apiId,"loading"],!1));case"set result":return void Object(x.a)(e,[t.apiId,"result"],t.result);case"save favorites":const n={};return Object(O.a)(e,((e,t)=>{if(!e||e.loading)return;const o=e.result.data;o&&(n[t]=Object(E.d)(o))})),void browser.runtime.sendMessage({action:"save favorite",record:{text:t.text,results:n}})}}));var T=n(299),S=n(36),N=n.n(S);var _=n(112);const k=Object(s.a)(d.a,"selectedAPIs","selectedExternalLinks","destination","autoPlay","autoCopy","recentUseLangFrom","recentUseLangTo","sourceTransformNCaml","sourceTransformNoBr","sourceTransformNoComment","tipPanelSettingsClosed","historyEnabled","favoritesEnabled"),j=Object(s.a)(d.b,["user"]),L=/^[A-Z]?[a-z]+([A-Z][a-z]*)+$/,I=/^([A-Za-z]+_)+[A-Za-z]+$/,R={small:14,middle:18,large:22};t.b=Object(o.forwardRef)((function(e,t){const{queryText:n,headerLeft:d,headerRight:p,extendOptions:m,showTextArea:h=!1,textMode:g=!1,size:b="small"}=e,[y,v]=Object(c.a)(k),[C]=Object(c.a)(j),A=(null==C?void 0:C.user)||null,x=y||k,O=R[b],S="small"===b,P="large"===b,[M,z]=Object(o.useState)(""),[H,K]=Object(o.useState)(""),[Y,V]=Object(o.useState)(""),W=Object(o.useRef)(null),[U,$]=Object(o.useState)(!1),{results:q,queryResult:J,dispatchResults:X}=function(e,t,n,r){const[a,i]=Object(o.useReducer)(D,B),s=Object(T.a)(e),u=Object(T.a)(n),l=Object(T.a)(t),c=async(e,t,n,o)=>{let r;i({type:"set loading",apiId:t,value:!0});try{r=await browser.runtime.sendMessage({action:"translate",data:{apiCode:t,text:e,source:n}})}catch(e){if(null==o?void 0:o.canceled)return;i({type:"set result",apiId:t,result:{data:null,error:{code:"BACKGROUND_DISCONNECTED"}}})}(null==o?void 0:o.canceled)||(i({type:"set loading",apiId:t,value:!1}),r&&i({type:"set result",apiId:t,result:r}))};return Object(o.useEffect)((()=>{if(!e)return;const o=e===s&&n===u&&!N()(t,l),r={canceled:!1};return t.forEach((async t=>{o&&(null==l?void 0:l.includes(t))||c(e,t,n,r)})),()=>{r.canceled=!0}}),[t,r,e,n]),{results:a,queryResult:c,dispatchResults:i}}(Y,y?y.selectedAPIs:[],M,null==y?void 0:y.destination),[Z,G]=Object(o.useState)([]),[,Q]=Object(o.useReducer)(F,{translateId:""}),{isInFavorites:ee,saveOrDelete:te}=function(e,t){const[n,r]=Object(o.useState)(!1);return Object(o.useEffect)((()=>{browser.runtime.sendMessage({action:"is text in favorites",text:e}).then(r)}),[e]),{isInFavorites:n,saveOrDelete:n?()=>{browser.runtime.sendMessage({action:"delete record in favorites",text:e}),r(!1)}:()=>{t({type:"save favorites",text:e}),r(!0)}}}(Y,X),{sourceTransformNCaml:ne,sourceTransformNoBr:oe,sourceTransformNoComment:re}=(null==A?void 0:A.vipActivated)?Object(s.a)(y||k,["sourceTransformNCaml","sourceTransformNoBr","sourceTransformNoComment"]):{sourceTransformNCaml:!1,sourceTransformNoBr:!1,sourceTransformNoComment:!1},ae=Object(o.useCallback)((e=>function(e,t){let n=e.trim();return t&&(t.sourceTransformNoBr&&(n=n.replace(/\n/g,"")),t.sourceTransformNoComment&&(n=n.replace(/\/\//g,"")),t.sourceTransformNCaml&&(L.test(n)?n=n.replace(/[A-Z]/g,((e,t)=>0===t?e.toLowerCase():" "+e.toLowerCase())):I.test(n)&&(n=n.replace(/_/g," ")))),n}(e,{sourceTransformNCaml:ne,sourceTransformNoBr:oe,sourceTransformNoComment:re})),[ne,oe,re]),ie=Object(o.useMemo)((()=>Object(u.a)((e=>{V(ae(e))}),1e3)),[ae]);Object(o.useEffect)((()=>{G((e=>Object(E.b)(e,(e=>{e.splice(0)}))));const e=ae(n);K(e),V(e)}),[ae,n]);const se=Object(T.a)(Y);Object(o.useEffect)((()=>{x.historyEnabled&&se!==Y&&Y&&Q({type:"save translate record",text:Y})}),[Q,Y,x.historyEnabled]),Object(o.useImperativeHandle)(t,(()=>({select:()=>{window.setTimeout((()=>{W.current&&(W.current.focus(),W.current.select())}))}})),[]);const ue=r.a.createElement(a.d,{icon:r.a.createElement(a.t,{icon:"cog",iconSize:O}),small:S,large:P,minimal:!0,active:U,className:"settings",onClick:()=>{$((e=>!e))},title:"快捷设置"});return r.a.createElement("div",{id:"translate-panel",className:"size-"+b},r.a.createElement("div",{className:"header"},d,r.a.createElement("div",{className:"drag-block"}),r.a.createElement("div",{className:"right"},!!Z.length&&r.a.createElement(a.d,{icon:r.a.createElement(a.t,{icon:"undo",iconSize:O}),small:S,large:P,minimal:!0,title:"返回上一次翻译",onClick:()=>{const e=Object(l.a)(Z);e&&(K(e),V(e)),G((e=>Object(E.b)(e,(e=>{e.pop()}))))}}),y&&r.a.createElement(r.a.Fragment,null,y.favoritesEnabled&&r.a.createElement(a.d,{icon:r.a.createElement(a.t,{icon:ee?"star":"star-empty",iconSize:O}),small:S,large:P,minimal:!0,title:ee?"从收藏夹中删除":"添加到收藏夹",onClick:te}),y.tipPanelSettingsClosed&&ue,!y.tipPanelSettingsClosed&&r.a.createElement(a.D,{enforceFocus:!1,content:r.a.createElement("div",{className:"bp3-text-small",style:{width:"200px",padding:"5px"}},"添加 / 隐藏翻译源、语种切换、鼠标悬浮取词开关和显示翻译文本开关在这里。",r.a.createElement("a",{onClick:()=>{v({tipPanelSettingsClosed:!0})}},"不再提示")),canEscapeKeyClose:!1,isOpen:!y.tipPanelSettingsClosed,usePortal:!1},ue)),p)),r.a.createElement(a.i,{isOpen:U,keepChildrenMounted:!0},r.a.createElement(w,{source:M,setSource:z,options:y,setOptions:v,user:A,rightOffset:g?-110:void 0,size:b},m)),r.a.createElement("div",{className:"query-text",style:{display:h?"":"none"}},r.a.createElement(a.L,{fill:!0,small:S,large:P,inputRef:e=>W.current=e,value:H,onChange:e=>{const t=e.target.value;K(t),ie(t)},onKeyDown:e=>e.stopPropagation()})),r.a.createElement("div",{className:"body"},!Y&&r.a.createElement("p",null,"请输入需要翻译的文本。"),Y&&(null==y?void 0:y.selectedAPIs.map(((e,t)=>{const n=q[e];return n&&r.a.createElement(i.a,{key:e,apiId:e,result:n,size:b,queryResult:t=>{J(Y,e,t||M)},autoPlay:y.autoPlay&&0===t,autoCopy:!!(null==A?void 0:A.vipActivated)&&y.autoPlay&&0===t,setQuery:e=>{G((e=>Object(E.b)(e,(e=>{e.push(Y)})))),V(e),K(e)}})}))),!(null==y?void 0:y.selectedAPIs.length)&&r.a.createElement(a.C,{className:"no-api",title:"你隐藏了所有翻译源",description:"请添加一个翻译源来显示翻译结果。",action:r.a.createElement(a.D,{usePortal:!1,content:r.a.createElement(a.v,null,r.a.createElement(f,null))},r.a.createElement(a.d,{icon:"add",small:S,large:P,text:"添加翻译源"}))}),!!(null==y?void 0:y.selectedExternalLinks.length)&&r.a.createElement("div",{className:"external-translators"},y.selectedExternalLinks.map((e=>{const t=_.a.find((t=>t.id===e));return t?r.a.createElement("div",{key:e},r.a.createElement(a.b,{small:S,large:P,text:t.name,target:"_blank",href:t.generateLink(Y,y.destination,M)})):null})))))}))},65:function(e){e.exports=JSON.parse('{"中文(简体)":"zh-CHS","英语":"en","日语":"ja","西班牙语":"es","阿拉伯语":"ar","法语":"fr","韩语":"ko","俄语":"ru","德语":"de","葡萄牙语":"pt","意大利语":"it","荷兰语":"nl","越南语":"vi","印地语":"hi"}')},74:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return i}));var o=n(129);const r=document.caretPositionFromPoint?function(e,t){const n=document.caretPositionFromPoint(e,t);return n&&{offsetNode:n.offsetNode,offset:n.offset}}:document.caretRangeFromPoint?function(e,t){const n=document.caretRangeFromPoint(e,t);return n&&{offsetNode:n.startContainer,offset:n.startOffset}}:void 0;const a=!r;class i{constructor(e,t=1e3,n,a=document.body){this.destroyed=!1,this.context=a,this.onMouseMove=Object(o.a)((t=>{n&&!t[n]||(!function(e,t){if(!r)return null;const n=window.getSelection();if(!n)return null;const o=r(e,t);if(!o)return null;const{offset:a,offsetNode:i}=o;if(i.nodeType!==Node.TEXT_NODE)return null;const s=n.rangeCount>0?n.getRangeAt(0):void 0;n.removeAllRanges();const u=document.createRange();u.setStart(i,a),u.setEnd(i,a),n.addRange(u),n.modify("move","backward","word"),n.modify("extend","forward","word");const l=n.getRangeAt(0).getBoundingClientRect();(l.left>e||l.left+l.width<e||l.top>t||l.top+l.height<t)&&(n.removeAllRanges(),s&&n.addRange(s))}(t.clientX,t.clientY),e(t))}),t),a.addEventListener("mousemove",this.onMouseMove)}destroy(){this.destroyed=!0,this.context.removeEventListener("mousemove",this.onMouseMove)}}},89:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return l}));var o=n(57),r=n(28);const a=n.n(r)()("hotkeys"),i={ctrl:o.b?"metaKey":"ctrlKey",alt:"altKey",shift:"shiftKey"},s={ctrl:o.b?[91,93]:[17],alt:[18],shift:[16]};function u(e,t){return!(!t||!t.length)&&t.every((t=>e[i[t]]))}function l(e,t,n,o){const r=new Set;let i=!1;function u(){r.clear(),i?(i=!1,a("辅助键处于激活状态，执行中断回调"),o()):a("辅助键未处于激活状态")}function l(){a("页面失去了焦点，执行中断操作"),u()}function c(n){const o=n.keyCode,l=r.size;if(!e.some((e=>{if(s[e].includes(o))return r.add(e),!0})))return a("按下了不是辅助键的其它键，执行中断操作"),void u();l!==r.size&&(a("按下了新的辅助键，当前已经按下的辅助键：",[...r]),r.size===e.length&&(a("全部辅助键已按下，将辅助键改为激活状态，并执行辅助键按下回调"),i=!0,t()))}function d(t){const o=t.keyCode,u=r.size;if(!u)return;e.some((e=>{if(s[e].includes(o))return r.delete(e),!0}))&&u!==r.size&&(a("松开了新的辅助键，当前已经按下的辅助键：",[...r]),i=!1,e.length-r.size==1&&(a("一个辅助键已松开，执行辅助键松开回调"),n()))}return window.addEventListener("keydown",c),window.addEventListener("blur",l),window.addEventListener("keyup",d),()=>{window.removeEventListener("keydown",c),window.removeEventListener("blur",l),window.removeEventListener("keyup",d)}}}});