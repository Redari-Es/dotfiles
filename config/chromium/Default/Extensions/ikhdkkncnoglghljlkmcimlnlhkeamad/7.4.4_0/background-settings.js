(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{110:function(t,e,a){"use strict";a.d(e,"a",(function(){return M}));var s=a(172),n=a(204),r=a(96),o=a(202),i=a(17);function c(t){const e=[];return Object(o.a)(t,((t,a)=>{const s=[].concat(t);e.push(...s.map((t=>`${a}=${encodeURIComponent(t)}`)))})),e.join("&")}var l=function(t){const e=new XMLHttpRequest,a=new URL(t.url),s=c(t.query);s&&(a.search+="?"+s);const{method:n="get"}=t;let r;if(e.open(n,a.toString()),t.timeout&&(e.timeout=t.timeout),"post"===n)switch(t.type){case"form":e.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),r=c(t.body);break;case"json":default:e.setRequestHeader("Content-Type","application/json; charset=UTF-8"),r=JSON.stringify(t.body)}const{headers:l}=t;return l&&Object(o.a)(l,((t,a)=>{e.setRequestHeader(a,t)})),e.responseType=t.responseType||"json",new Promise(((t,a)=>{e.onload=()=>{200===e.status&&null!==e.response?t(e.response):a(Object(i.a)("API_SERVER_ERROR"))},e.ontimeout=()=>{a(Object(i.a)("NETWORK_TIMEOUT","查询超时"))},e.onerror=()=>{a(Object(i.a)("NETWORK_ERROR","网络错误"))},e.send(r)}))},d=null;function u(t,e){for(var a=0;a<e.length-2;a+=3){var s=e.charAt(a+2);s=s>="a"?s.charCodeAt(0)-87:Number(s),s="+"===e.charAt(a+1)?t>>>s:t<<s,t="+"===e.charAt(a)?t+s&4294967295:t^s}return t}const h="https://fanyi.baidu.com",f={"X-Requested-With":"XMLHttpRequest"},m=Object(s.a)(r),p=/window\.gtk\s=\s'([^']+)';/,y=/token:\s'([^']+)'/;class w{async getToken(){const t=await l({url:"https://fanyi.baidu.com",headers:undefined,responseType:"text"}),e=t.match(p);if(e){const a=t.match(y);if(a)return{seed:e[1],token:a[1]}}throw Object(i.a)("API_SERVER_ERROR")}async translate(t,e,a){t=t.trim();let s=Object(n.a)(a,"token");s||(s=await this.getToken());const o=function(t,e){var a=t.length;a>30&&(t=""+t.substr(0,10)+t.substr(Math.floor(a/2)-5,10)+t.substr(-10,10));for(var s=(null!==d?d:(d=e||"")||"").split("."),n=Number(s[0])||0,r=Number(s[1])||0,o=[],i=0,c=0;c<t.length;c++){var l=t.charCodeAt(c);128>l?o[i++]=l:(2048>l?o[i++]=l>>6|192:(55296==(64512&l)&&c+1<t.length&&56320==(64512&t.charCodeAt(c+1))?(l=65536+((1023&l)<<10)+(1023&t.charCodeAt(++c)),o[i++]=l>>18|240,o[i++]=l>>12&63|128):o[i++]=l>>12|224,o[i++]=l>>6&63|128),o[i++]=63&l|128)}for(var h=n,f=0;f<o.length;f++)h=u(h+=o[f],"+-a^+6");return h=u(h,"+-3^+b+-f"),0>(h^=r)&&(h=2147483648+(2147483647&h)),(h%=1e6).toString()+"."+(h^n)}(t,s.seed);let c,m,p=Object(n.a)(a,"source");p||(p=await this.detect(t)),Array.isArray(e)?(c=e[0],m=e[1]):c=e;let y=r[c];y===p&&m&&(y=r[m]);const w=r[p];if(!y||!w)throw Object(i.a)("UNSUPPORTED_LANG");const g=await l({url:h+"/v2transapi",type:"form",method:"post",timeout:Object(n.a)(a,"timeout"),body:{from:w,to:y,query:t,transtype:"translang",simple_means_flag:3,token:s.token,sign:o},headers:f}),b=await this.transformRaw(t,g);return b.from===c&&m?this.translate(t,m,a):b}async transformRaw(t,e){const a=e.trans_result,s=Object(n.a)(a,"from"),r=Object(n.a)(a,"to"),o={text:t,raw:e,link:`https://fanyi.baidu.com/#${s}/${r}/${encodeURIComponent(t)}`,from:m[s],to:m[r]},c=Object(n.a)(e,["dict_result","simple_means","symbols","0"]);if(c){const e=[],{ph_am:a,ph_en:s,word_symbol:n}=c;a&&e.push({name:"美",ttsURI:await this.getTTS(t,"英语"),value:a}),s&&e.push({name:"英",ttsURI:await this.getTTS(t,"英语(英国)"),value:s}),n&&e.push({ttsURI:await this.getTTS(t,o.from),value:n}),e.length&&(o.phonetic=e);try{const t=[];c.parts.forEach((e=>{let a=!0;const s={pos:e.part,terms:[]};e.means.forEach((e=>{"string"!=typeof e?(a=!1,t.push({pos:e.part,terms:[e.word_mean].concat(e.means)})):s.terms.push(e)})),a&&t.push(s)})),t.length&&(o.dict=t)}catch(t){}}if(!o.phonetic)try{o.ttsURI=await this.getTTS(t,o.from)}catch(t){}try{o.result=a.data.map((t=>t.dst))}catch(t){}if(!o.dict&&!o.result)throw Object(i.a)("API_SERVER_ERROR");return o}async detect(t){const e=(t=t.trim()).slice(0,150),a=await l({method:"post",url:h+"/langdetect",body:{query:e.replace(/\s/g,"+")},type:"form"});if(0===a.error){const t=m[a.lan];if(t)return t}throw Object(i.a)("UNSUPPORTED_LANG")}async getTTS(t,e,a=3){let s;if(t=t.trim(),"英语(英国)"===e)s="uk";else if(s=r[e],!s)throw Object(i.a)("UNSUPPORTED_LANG");return`https://fanyi.baidu.com/gettts?lan=${s}&text=${encodeURIComponent(t)}&spd=${a}&source=web`}}w.LANGUAGES_MAP=r;var g=w,b=a(65),_=a(164),v=a.n(_);const R="fanyideskweb",O=navigator.appVersion,S=v()(O);const E=Object(s.a)(b),A={"英语":"eng","日语":"jap","韩语":"ko","法语":"fr"};class T{async getToken(){const t=(await l({url:"http://fanyi.youdao.com",responseType:"text"})).match(/<script.*?src="([^"]+?\/fanyi\.min\.js)"/);if(!t)return;const e=(await l({url:t[1],responseType:"text"})).match(/sign:n\.md5\("fanyideskweb"\+e\+i\+"([^"]+?)"\)/);return e?e[1]:void 0}async translate(t,e,a){let s,r;t=t.trim(),Array.isArray(e)?(s=e[0],r=e[1]):s=e;const o=b[s];if(!o)throw Object(i.a)("UNSUPPORTED_LANG");const c=Object(n.a)(a,"source");let d;if(c){if(d=b[c],!d)throw Object(i.a)("UNSUPPORTED_LANG");if(c===s&&r)return this.translate(t,r,a)}else d="AUTO";let u=Object(n.a)(a,"token");if(!u&&(u=await this.getToken(),!u))throw Object(i.a)("API_SERVER_ERROR");const h=function(t,e){const a=Date.now()+"",s=a+parseInt(10*Math.random()+"",10);return{client:R,ts:a,bv:S,salt:s,sign:v()(R+t+s+e)}}(t,u),f=await l({method:"post",url:"http://fanyi.youdao.com/translate_o?smartresult=dict&smartresult=rule",type:"form",timeout:Object(n.a)(a,"timeout"),body:{i:t,from:d,to:o,smartresult:"dict",doctype:"json",version:"2.1",keyfrom:"fanyi.web",action:"FY_BY_REALTIME",typoResult:"false",...h},headers:undefined}),m=await this.transformRaw(f,t);return m.from===m.to&&r?this.translate(t,r,a):m}async transformRaw(t,e){if(0!==t.errorCode)throw Object(i.a)("API_SERVER_ERROR");let[a,s]=t.type.split("2");a=E[a],s=E[s];const{smartResult:n}=t,r={raw:t,text:e,from:a,to:s,link:n?`https://dict.youdao.com/search?q=${encodeURIComponent(e)}&keyfrom=fanyi.smartResult`:`http://fanyi.youdao.com/translate?i=${encodeURIComponent(e)}`};try{r.ttsURI=await this.getTTS(e,r.from)}catch(t){}if(n)try{r.dict=n.entries.filter((t=>t)).map((t=>{const e=t.trim();let a,s;const n=e.indexOf(". ");return n>=0?(a=e.slice(0,e.indexOf(". "))+".",s=e.slice(n+2).split("；")):s=e.split("；"),{pos:a,terms:s}}))}catch(t){}try{const e=[];t.translateResult.forEach((t=>{const a=t.map((t=>t.tgt.trim())).join("");a.length&&e.push(a)})),r.result=e}catch(t){}return r}async getTTS(t,e){t=t.trim();const a=A[e];if(!a)throw Object(i.a)("UNSUPPORTED_LANG");return`http://tts.youdao.com/fanyivoice?word=${encodeURIComponent(t)}&le=${a}&keyfrom=speaker-target`}}T.LANGUAGES_MAP=b;var k=T,j=a(97);function L(t,e){let a,s="",n=function(t,e){for(let a,s=0;s<e.length-2;s+=3)a="a"<=(a=e.charAt(s+2))?a.charCodeAt(0)-87:Number(a),a="+"===e.charAt(s+1)?t>>>a:t<<a,t="+"===e.charAt(s)?t+a&4294967295:t^a;return t},r=(a=""!==s?s:(s=e||"")||"").split(".");a=Number(r[0])||0;let o=[],i=0,c=0;for(;c<t.length;c++){let e=t.charCodeAt(c);128>e?o[i++]=e:(2048>e?o[i++]=e>>6|192:(55296==(64512&e)&&c+1<t.length&&56320==(64512&t.charCodeAt(c+1))?(e=65536+((1023&e)<<10)+(1023&t.charCodeAt(++c)),o[i++]=e>>18|240,o[i++]=e>>12&63|128):o[i++]=e>>12|224,o[i++]=e>>6&63|128),o[i++]=63&e|128)}for(t=a,i=0;i<o.length;i++)t=n(t+=o[i],"+-a^+6");return t=n(t,"+-3^+b+-f"),0>(t^=Number(r[1])||0)&&(t=2147483648+(2147483647&t)),(t%=1e6).toString()+"."+(t^a)}const N=Object(s.a)(j);class U{async getToken(){const t=(await l({url:"https://translate.google.cn/translate_a/element.js",responseType:"text"})).match(/_ctkk='(\d+\.\d+)'/);if(t)return t[1];throw Object(i.a)("API_SERVER_ERROR")}async translate(t,e,a){t=t.trim();let s=Object(n.a)(a,"token");s||(s=await this.getToken());const r=Object(n.a)(a,"source");let o,c,d;if(r){if(o=j[r],!o)throw Object(i.a)("UNSUPPORTED_LANG")}else o="auto";Array.isArray(e)?(c=e[0],d=e[1]):c=e;const u=j[c];if(!u)throw Object(i.a)("UNSUPPORTED_LANG");const h=await l({url:"https://translate.google.cn/translate_a/single",query:{client:"webapp",sl:o,tl:u,dj:"1",ie:"UTF-8",oe:"UTF-8",source:"icon",dt:["t","bd","qc","rm","ex","at","ss","rw","ld"],q:t,tk:L(t,s)}}),f=this.transformRaw(h,{to:c,text:t});return f.from===f.to&&d?this.translate(t,d,a):f}transformRaw(t,e){var a;const{text:s,to:n}=e,r=t.src,o={text:s,raw:t,from:N[r],to:n,link:`https://translate.google.cn/#view=home&op=translate&sl=${r}&tl=${j[n]}&text=${encodeURIComponent(s)}`};try{o.dict=null===(a=t.dict)||void 0===a?void 0:a.map((t=>({pos:t.pos,terms:t.terms})))}catch(t){}if("英语"===o.from)try{let e;t.sentences.some((t=>{if("src_translit"in t)return e=t.src_translit,!0})),e&&(o.phonetic=[{value:`${e}`,ttsURI:this.getTTS(s,o.from)}])}catch(t){}try{o.phonetic||(o.ttsURI=this.getTTS(s,o.from))}catch(t){}try{o.result=t.sentences.map((t=>"trans"in t?t.trans:"")).join("").split(/\n+/)}catch(t){}return o}getTTS(t,e){t=t.trim();const a=j[e];if(!a)throw Object(i.a)("UNSUPPORTED_LANG");return`https://translate.googleapis.com/translate_tts?client=gtx&tl=${a}&ie=UTF-8&q=${encodeURIComponent(t)}`}}U.LANGUAGES_MAP=j;var P=U,C=a(123);const x=new g,D=new k,I=new P,$=new C.a;function M(t){switch(t){case"YouDaoWeb":return D;case"BaiDuWeb":return x;case"GoogleWeb":return I;case"DeepLWeb":return $}}},123:function(t,e,a){"use strict";a.d(e,"b",(function(){return d})),a.d(e,"a",(function(){return f}));var s=a(172),n=a(156),r=a(28),o=a.n(r),i=a(17);const c=o()("deepL"),l=o()("deepLInFrame");function d(){if("https://www.deepl.com/translator"!==window.location.href||window.top===window)return;let t;window.addEventListener("message",(e=>{let a;try{a=JSON.parse(e.data)}catch(e){return}if("HCFY_DEEPL_TEANSLATE_MESSAGE"===(null==(s=a)?void 0:s.type)){var s;if(l("收到背景页传过来的翻译消息：",a),t){const e={type:"HCFY_DEEPL_CANCEL",id:t};l("有一个正在执行当中的翻译请求，发送取消掉的消息体：",e),window.top.postMessage(JSON.stringify(e),"*")}t=a.id,window.location.hash=`#${a.from}/${a.to}/${a.text}`}}));new MutationObserver((e=>{t&&e.some((e=>{if(e.addedNodes.length){let a=!1,s="";const n=[];if(e.addedNodes.forEach((t=>{var e,r;const o=t;if(o.classList.contains("lmt__translations_as_text__main_translation")){const t=null===(e=o.getElementsByClassName("lmt__translations_as_text__text_btn")[0].textContent)||void 0===e?void 0:e.trim();t&&(a=!0,s=t)}else if(a&&o.classList.contains("lmt__translations_as_text__item")){const t=null===(r=o.getElementsByClassName("lmt__translations_as_text__text_btn")[0].textContent)||void 0===r?void 0:r.trim();t&&n.push(t)}})),a){const e={type:"HCFY_DEEPL_RETURN_RESULT",id:t,hash:window.location.hash,result:s,otherResults:n};t=void 0,l("监测到翻译结果区域变化，传给背景页当前结果的消息体：",e),window.top.postMessage(JSON.stringify(e),"*")}}}))})).observe(document.getElementsByClassName("lmt__translations_as_text")[0],{childList:!0})}const u={"中文(简体)":"zh","英语":"en","德语":"de","法语":"fr","西班牙语":"es","葡萄牙语":"pt","意大利语":"it","荷兰语":"nl","波兰语":"pl","俄语":"ru","日语":"ja"},h=Object(s.a)(u);class f{constructor(){const t=this.frame=document.createElement("iframe");t.src="https://www.deepl.com/translator",t.style.display="none",this.frameReady=new Promise(((e,a)=>{t.onload=()=>{c("iframe 加载完毕"),e(t.contentWindow)},t.onerror=()=>{a()}})),document.body.appendChild(t),this.msgMap=new Map,window.addEventListener("message",(t=>{let e;try{e=JSON.parse(t.data)}catch(t){return}if("HCFY_DEEPL_CANCEL"===(null==(a=e)?void 0:a.type)){c("收到 iframe 传回来的取消翻译的消息：",e);const t=this.msgMap.get(e.id);if(!t)return;return this.msgMap.delete(e.id),void t.reject(Object(i.a)("NETWORK_ERROR"))}var a;if(function(t){return"HCFY_DEEPL_RETURN_RESULT"===(null==t?void 0:t.type)}(e)){c("收到 iframe 传回来的翻译结果消息：",e);const t=this.msgMap.get(e.id);if(!t)return;this.msgMap.delete(e.id),t.resolve(e)}}))}async translate(t,e,a){c("调用翻译方法，三个参数为：",t,e,a);const s=(null==a?void 0:a.source)?u[a.source]:"auto",r="string"==typeof e?u[e]:u[e[0]];if(!s||!r)throw Object(i.a)("UNSUPPORTED_LANG");const o=await this.frameReady,l=await new Promise(((e,a)=>{const i=Object(n.a)(),l={type:"HCFY_DEEPL_TEANSLATE_MESSAGE",id:i,from:s,to:r,text:t};c("通知 iframe 进行翻译，消息体为：",l),o.postMessage(JSON.stringify(l),"*"),this.msgMap.set(i,{resolve:e,reject:a})})),[d,f,m]=l.hash.slice(1).split("/"),p=[];l.otherResults.length&&p.push("其它翻译结果："+l.otherResults.join(", "));const y={text:decodeURIComponent(m),raw:l,from:h[d],to:h[f],link:"https://www.deepl.com/translator"+l.hash},w=l.result.split("\n");return l.otherResults.length?y.dict=[{terms:w},{terms:l.otherResults}]:y.result=w,c("生成最终翻译结果对象：",y),y}getTTS(){throw Object(i.a)("UNSUPPORTED_LANG")}}},130:function(t,e,a){"use strict";a.d(e,"a",(function(){return o})),a.d(e,"b",(function(){return i}));var s=a(90),n=a(140),r=a(18);const o=new n.a(s.a.historyRecords,["text","url","favicon","title"],(async t=>(await r.a.post("/histories",t)).data),"historiesSyncAt",(async()=>(await r.a.delete("/histories")).data),(async t=>(await r.a.put("/histories",t)).data),(async t=>(await r.a.get("/histories?lastCheck="+t)).data),(t=>r.a.delete("/histories/logs?date="+t)));function i(t,e,a){let s;if(a){const t=a.toLocaleLowerCase();s=e=>e.title.toLocaleLowerCase().includes(t)||e.url.toLocaleLowerCase().includes(t)||e.text.toLocaleLowerCase().includes(t)}return o.query(t,e,s)}},140:function(t,e,a){"use strict";a.d(e,"a",(function(){return d}));var s=a(156),n=a(67),r=a(86),o=a(85),i=a(90);const c=(t,e)=>{t._id?(t.deleted=!0,t.syncStatus=l.Pending):delete e.value};var l;!function(t){t.Pending="Pending",t.Finished="Finished"}(l||(l={}));class d{constructor(t,e,a,s,n,r,o,i){this.table=t,this.syncKeys=e.concat("date"),this.getDataFromServer=a,this.syncTimeStorageKey=s,this.deleteData=n,this.commitChanges=r,this.pullChanges=o,this.deleteLogsFn=i}async add(t,e){const a={...t},r=Date.now();a.id=Object(s.a)(r+"-"),a.date=r,e&&(a.syncStatus=l.Pending),await this.table.add(a),e&&this.commit().catch(n.a)}async deleteById(t,e){await this.table.where("id").anyOf(t).modify(c),e&&this.commit().catch(n.a)}async deleteAll(t){let e;t&&(e=await this.deleteData()),await this.table.clear(),e&&await this.setSyncTime(e)}async deleteByKey(t,e,a){await this.table.where(t).equalsIgnoreCase(e).modify(c),a&&this.commit().catch(n.a)}async hasByKey(t,e){return await this.table.where(t).equalsIgnoreCase(e).and((t=>!t.deleted)).count()>0}query(t,e,a){const s=e?this.table.where("date").below(e).reverse():this.table.orderBy("date").reverse();return s.filter(a?t=>!t.deleted&&a(t):t=>!t.deleted),s.limit(t).toArray()}async getSyncChanges(){const t=await this.table.where("syncStatus").equals(l.Pending).toArray(),e=[],a=[],s=[];return t.forEach((t=>{t._id?t.deleted&&s.push(t._id):(e.push(Object(r.a)(t,this.syncKeys)),a.push(t.id))})),{changes:{added:Object(o.a)(e)?void 0:e,deleted:Object(o.a)(s)?void 0:s},addedLocalIds:a}}addServerData(t){return i.a.transaction("rw",this.table,(async()=>{const e=Date.now()+"-",a=t.map((t=>(t.id=Object(s.a)(e),t._id)));await this.table.where("_id").anyOf(a).delete(),await this.table.bulkAdd(t)}))}async downloadData(t){const e=await this.getDataFromServer(t),a=e.list;return Array.isArray(a)&&a.length&&await this.addServerData(a),e.date}setSyncTime(t){return browser.storage.local.set({[this.syncTimeStorageKey]:t})}async commit(){const{changes:t,addedLocalIds:e}=await this.getSyncChanges(),a=await this.commitChanges(t);Object(o.a)(a)||await this.table.where("id").anyOf(e).modify((t=>{const s=e.indexOf(t.id);s>=0&&(t._id=a[s],delete t.syncStatus)}))}async pull(t){const e=(await browser.storage.local.get(this.syncTimeStorageKey))[this.syncTimeStorageKey];if(!e){const t=await this.downloadData();return await this.setSyncTime(t),this.deleteLogsFn(t).catch(n.a),!0}if(!t)return!1;const{changes:a,date:s}=await this.pullChanges(e);let r;const c=a.reduce(((t,e)=>{var a,s;return e.deleteAll?(t.added.clear(),t.deleted.clear(),r=!0,t):(null===(a=e.added)||void 0===a||a.forEach((e=>{t.added.add(e)})),null===(s=e.deleted)||void 0===s||s.forEach((e=>{t.added.has(e)?t.added.delete(e):t.deleted.add(e)})),t)}),{added:new Set,deleted:new Set});let l,d=[];const u=!!c.added.size;c.added.size&&(d=await this.table.where("_id").anyOf(Array.from(c.added)).toArray(),d.forEach((t=>{c.added.delete(t._id)})),c.added.size&&(l=(await this.getDataFromServer(Array.from(c.added))).list));const h=r||!!l||!!c.deleted.size;return h&&await i.a.transaction("rw",this.table,(async()=>{r&&(await this.table.clear(),!Object(o.a)(d)&&await this.table.bulkAdd(d));const t=[];return l&&t.push(this.addServerData(l)),c.deleted.size&&t.push(this.table.where("_id").anyOf(Array.from(c.deleted)).delete()),Promise.all(t)})),await this.setSyncTime(s),(h||u)&&this.deleteLogsFn(s).catch(n.a),h}}},17:function(t,e,a){"use strict";e.a=function(t,e){const a=new Error(e);return a.code=t,a}},18:function(t,e,a){"use strict";a.d(e,"c",(function(){return o})),a.d(e,"b",(function(){return i})),a.d(e,"a",(function(){return c}));var s,n=a(141),r=a.n(n);function o(t){return null==t?void 0:t.isError}function i(t){return null==t?void 0:t.isAxiosError}!function(t){t.VIP_OUTDATED="VIP_OUTDATED"}(s||(s={}));const c=r.a.create({baseURL:"https://hs-api.limingkai.cn/",validateStatus:function(t){return t>=200&&t<300||304===t}});c.interceptors.response.use((async t=>{const e=t.data;return o(e)?("VIP_OUTDATED"===e.errorCode&&browser.storage.local.set({user:e.data}),Promise.reject(e)):t}),(t=>{var e;return i(t)&&401===(null===(e=t.response)||void 0===e?void 0:e.status)&&browser.storage.local.remove(["user","optionsSyncAt","favoritesSyncAt","historiesSyncAt"]),Promise.reject(t)}))},23:function(t,e,a){"use strict";function s(t){return`${t.host}${t.path}`}function n(t){const e=t.match(/^([^:]+):\/\/([^/]+)?(\/.*)?$/);if(!e)return;let a=e[2]||"";const s=a.indexOf(":");s>=0&&(a=a.slice(0,s));let n=e[3]||"";const r=n.indexOf("#");if(r>=0&&(n=n.slice(0,r)),!a.startsWith(".")){if(!n){if(!a)return;n="/"}return{host:a,path:n}}}function r(t,e){return new RegExp("^"+t.replace(/[-[\]{}()+?.,\\^$|#\s]/g,"\\$&").replace("*",".*").replace(/^\.\*\\\./,"(.*\\.)?")+"$").test(e)}function o(t,e){return new RegExp("^"+t.replace(/[-[\]{}()+?.,\\^$|#\s]/g,"\\$&").replace(/\*/g,".*")+"$").test(e)}function i(t,e){let a;if(a="string"==typeof e?n(e):e,a)return{isHostMatch:{ruleHost:t.host,urlHost:a.host,matches:r(t.host,a.host)},isPathMatch:{rulePath:t.path,urlPath:a.path,matches:o(t.path,a.path)}}}function c(t,e,a){let s,i;s="string"==typeof t?n(t):t;let c=!1,l=!1;if(s){const t=t=>{const e=function(t,e){let a;if(a="string"==typeof e?n(e):e,a)return r(t.host,a.host)&&o(t.path,a.path)}(t,s);return e&&(i=t),e};c=a.some(t),c||(l=e.some(t))}return{urlParts:s,matchedRule:i,whiteListMatched:c,blackListMatched:l}}function l(t,e,a){const s=c(t,e,a);return!s.urlParts||s.whiteListMatched||!s.blackListMatched}a.d(e,"e",(function(){return s})),a.d(e,"a",(function(){return n})),a.d(e,"d",(function(){return i})),a.d(e,"b",(function(){return c})),a.d(e,"c",(function(){return l}))},60:function(t,e,a){"use strict";a.d(e,"b",(function(){return c})),a.d(e,"a",(function(){return l})),a.d(e,"c",(function(){return d})),a.d(e,"d",(function(){return u}));var s=a(90),n=a(140),r=a(18),o=a(202),i=a(326);function c(t){const e=[];Object(o.a)(t,(t=>{if(!t)return;const a=t.from+" "+t.to,s=e.findIndex((t=>t[0]===a));s>=0?e[s][1]+=1:e.push([a,1])}));const a=Object(i.a)(e,(t=>t[1]));if(a){const t=a[0].split(" ");return{from:t[0],to:t[1]}}}const l=new n.a(s.a.favorites,["text","dir"],(async t=>(await r.a.post("/favorites",t)).data),"favoritesSyncAt",(async()=>(await r.a.delete("/favorites")).data),(async t=>(await r.a.put("/favorites",t)).data),(async t=>(await r.a.get("/favorites?lastCheck="+t)).data),(t=>r.a.delete("/favorites/logs?date="+t)));async function d(t){return l.hasByKey("text",t)}function u(t,e,a){let s;if(a){const t=a.toLocaleLowerCase();s=e=>{if(e.text.toLocaleLowerCase().includes(t))return!0;const a=e.results;return!!a&&Object.keys(a).some((e=>{var s,n;const r=a[e];return!!r&&(!!(null===(s=r.dict)||void 0===s?void 0:s.some((e=>e.terms.some((e=>e.includes(t))))))||!!(null===(n=r.result)||void 0===n?void 0:n.some((e=>e.includes(t)))))}))}}return l.query(t,e,s)}},65:function(t){t.exports=JSON.parse('{"中文(简体)":"zh-CHS","英语":"en","日语":"ja","西班牙语":"es","阿拉伯语":"ar","法语":"fr","韩语":"ko","俄语":"ru","德语":"de","葡萄牙语":"pt","意大利语":"it","荷兰语":"nl","越南语":"vi","印地语":"hi"}')},90:function(t,e,a){"use strict";var s=a(205);class n extends s.a{constructor(){super("hcfy"),this.version(3).stores({historyRecords:"id,date,_id,syncStatus",favorites:"id,date,text,_id,syncStatus"}),this.historyRecords=this.table("historyRecords"),this.favorites=this.table("favorites")}}e.a=new n},93:function(t,e,a){"use strict";a.d(e,"c",(function(){return i})),a.d(e,"a",(function(){return c})),a.d(e,"b",(function(){return l}));var s=a(18),n=a(6),r=a(36),o=a.n(r);async function i(){const t=await browser.storage.local.get(n.a),e=await s.a.put("/options",{options:JSON.stringify(t)});await browser.storage.local.set({optionsSyncAt:e.data})}async function c(t){let e;t||(e=(await browser.storage.local.get("optionsSyncAt")).optionsSyncAt);const a=await s.a.get("/options",{params:{ifModifiedSince:e}});if(204===a.status)return"no-data";if(304===a.status)return"not-modified";const r=a.data;if(!r)return"server-data-error";let i;try{i=JSON.parse(r.optionsString)}catch(t){return"server-data-error"}return o()(await browser.storage.local.get(n.a),i)?(await browser.storage.local.set({optionsSyncAt:r.updatedAt}),"not-modified"):t||e?(i.optionsSyncAt=r.updatedAt,await browser.storage.local.set(i),"covered"):{status:"need-confirm",date:r.updatedAt}}async function l(){const t=await c();return"no-data"===t?(await i(),"uploaded"):t}},96:function(t){t.exports=JSON.parse('{"中文(简体)":"zh","英语":"en","日语":"jp","泰语":"th","西班牙语":"spa","阿拉伯语":"ara","法语":"fra","韩语":"kor","俄语":"ru","德语":"de","葡萄牙语":"pt","意大利语":"it","希腊语":"el","荷兰语":"nl","波兰语":"pl","芬兰语":"fin","捷克语":"cs","保加利亚语":"bul","丹麦语":"dan","爱沙尼亚语":"est","匈牙利语":"hu","罗马尼亚语":"rom","斯洛文尼亚语":"slo","瑞典语":"swe","越南语":"vie","中文(粤语)":"yue","中文(繁体)":"cht","中文(文言文)":"wyw","南非荷兰语":"afr","阿尔巴尼亚语":"alb","阿姆哈拉语":"amh","亚美尼亚语":"arm","阿萨姆语":"asm","阿斯图里亚斯语":"ast","阿塞拜疆语":"aze","巴斯克语":"baq","白俄罗斯语":"bel","孟加拉语":"ben","波斯尼亚语":"bos","缅甸语":"bur","加泰罗尼亚语":"cat","宿务语":"ceb","克罗地亚语":"hrv","世界语":"epo","法罗语":"fao","菲律宾语":"fil","加利西亚语":"glg","格鲁吉亚语":"geo","古吉拉特语":"guj","豪萨语":"hau","希伯来语":"heb","印地语":"hi","冰岛语":"ice","伊博语":"ibo","印尼语":"id","爱尔兰语":"gle","卡纳达语":"kan","哈萨克语":"kaz","克林贡语":"kli","库尔德语":"kur","老挝语":"lao","拉丁语":"lat","拉脱维亚语":"lav","立陶宛语":"lit","卢森堡语":"ltz","马其顿语":"mac","马拉加斯语":"mg","马来语":"may","马拉雅拉姆语":"mal","马耳他语":"mlt","马拉地语":"mar","尼泊尔语":"nep","新挪威语":"nno","波斯语":"per","萨丁尼亚语":"srd","塞尔维亚语":"srp","僧伽罗语":"sin","斯洛伐克语":"sk","索马里语":"som","斯瓦希里语":"swa","他加禄语":"tgl","塔吉克语":"tgk","泰米尔语":"tam","鞑靼语":"tat","泰卢固语":"tel","土耳其语":"tr","土库曼语":"tuk","乌克兰语":"ukr","乌尔都语":"urd","乌兹别克语":"uzb","奥克语":"oci","吉尔吉斯语":"kir","普什图语":"pus","高棉语":"hkm","海地语":"ht","书面挪威语":"nob","旁遮普语":"pan","阿尔及利亚阿拉伯语":"arq","比斯拉马语":"bis","加拿大法语":"frn","哈卡钦语":"hak","胡帕语":"hup","印古什语":"ing","拉特加莱语":"lag","毛里求斯克里奥尔语":"mau","黑山语":"mot","巴西葡萄牙语":"pot","卢森尼亚语":"ruy","塞尔维亚-克罗地亚语":"sec","西里西亚语":"sil","突尼斯阿拉伯语":"tua","亚齐语":"ach","阿肯语":"aka","阿拉贡语":"arg","艾马拉语":"aym","俾路支语":"bal","巴什基尔语":"bak","本巴语":"bem","柏柏尔语":"ber","博杰普尔语":"bho","比林语":"bli","布列塔尼语":"bre","切罗基语":"chr","齐切瓦语":"nya","楚瓦什语":"chv","康瓦尔语":"cor","科西嘉语":"cos","克里克语":"cre","克里米亚鞑靼语":"cri","迪维希语":"div","古英语":"eno","中古法语":"frm","弗留利语":"fri","富拉尼语":"ful","盖尔语":"gla","卢干达语":"lug","古希腊语":"gra","瓜拉尼语":"grn","夏威夷语":"haw","希利盖农语":"hil","伊多语":"ido","因特语":"ina","伊努克提图特语":"iku","爪哇语":"jav","卡拜尔语":"kab","格陵兰语":"kal","卡努里语":"kau","克什米尔语":"kas","卡舒比语":"kah","卢旺达语":"kin","刚果语":"kon","孔卡尼语":"kok","林堡语":"lim","林加拉语":"lin","逻辑语":"loj","低地德语":"log","下索布语":"los","迈蒂利语":"mai","曼克斯语":"glv","毛利语":"mao","马绍尔语":"mah","南恩德贝莱语":"nbl","那不勒斯语":"nea","西非书面语":"nqo","北方萨米语":"sme","挪威语":"nor","奥杰布瓦语":"oji","奥里亚语":"ori","奥罗莫语":"orm","奥塞梯语":"oss","邦板牙语":"pam","帕皮阿门托语":"pap","北索托语":"ped","克丘亚语":"que","罗曼什语":"roh","罗姆语":"ro","萨摩亚语":"sm","梵语":"san","苏格兰语":"sco","掸语":"sha","修纳语":"sna","信德语":"snd","桑海语":"sol","南索托语":"sot","叙利亚语":"syr","德顿语":"tet","提格利尼亚语":"tir","聪加语":"tso","契维语":"twi","高地索布语":"ups","文达语":"ven","瓦隆语":"wln","威尔士语":"wel","西弗里斯语":"fry","沃洛夫语":"wol","科萨语":"xho","意第绪语":"yid","约鲁巴语":"yor","扎扎其语":"zaz","祖鲁语":"zul"}')},97:function(t){t.exports=JSON.parse('{"中文(简体)":"zh-CN","英语":"en","日语":"ja","泰语":"th","西班牙语":"es","阿拉伯语":"ar","法语":"fr","韩语":"ko","俄语":"ru","德语":"de","葡萄牙语":"pt","意大利语":"it","希腊语":"el","荷兰语":"nl","波兰语":"pl","芬兰语":"fi","捷克语":"cs","保加利亚语":"bg","丹麦语":"da","爱沙尼亚语":"et","匈牙利语":"hu","罗马尼亚语":"ro","斯洛文尼亚语":"sl","瑞典语":"sv","越南语":"vi","中文(繁体)":"zh-TW","南非荷兰语":"af","阿尔巴尼亚语":"sq","阿姆哈拉语":"am","亚美尼亚语":"hy","阿塞拜疆语":"az","巴斯克语":"eu","白俄罗斯语":"be","孟加拉语":"bn","波斯尼亚语":"bs","缅甸语":"my","加泰罗尼亚语":"ca","宿务语":"ceb","克罗地亚语":"hr","世界语":"eo","菲律宾语":"tl","加利西亚语":"gl","格鲁吉亚语":"ka","古吉拉特语":"gu","豪萨语":"ha","希伯来语":"iw","印地语":"hi","冰岛语":"is","伊博语":"ig","印尼语":"id","爱尔兰语":"ga","卡纳达语":"kn","哈萨克语":"kk","库尔德语":"ku","老挝语":"lo","拉丁语":"la","拉脱维亚语":"lv","立陶宛语":"lt","卢森堡语":"lb","马其顿语":"mk","马来语":"ms","马拉雅拉姆语":"ml","马耳他语":"mt","马拉地语":"mr","尼泊尔语":"ne","波斯语":"fa","塞尔维亚语":"sr","僧伽罗语":"si","斯洛伐克语":"sk","索马里语":"so","斯瓦希里语":"sw","塔吉克语":"tg","泰米尔语":"ta","鞑靼语":"tt","泰卢固语":"te","土耳其语":"tr","土库曼语":"tk","乌克兰语":"uk","乌尔都语":"ur","乌兹别克语":"uz","吉尔吉斯语":"ky","普什图语":"ps","高棉语":"km","旁遮普语":"pa","齐切瓦语":"ny","科西嘉语":"co","夏威夷语":"haw","卢旺达语":"rw","毛利语":"mi","挪威语":"no","奥里亚语":"or","萨摩亚语":"sm","修纳语":"sn","信德语":"sd","威尔士语":"cy","意第绪语":"yi","约鲁巴语":"yo","弗里西语":"fy","海地克里奥尔语":"ht","马尔加什语":"mg","蒙古语":"mn","苗语":"hmn","南非科萨语":"xh","南非祖鲁语":"zu","塞索托语":"st","苏格兰盖尔语":"gd","维吾尔语":"ug","印尼巽他语":"su","印尼爪哇语":"jw"}')}}]);