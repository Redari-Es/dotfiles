!function(e){function t(t){for(var a,o,i=t[0],l=t[1],s=t[2],d=0,f=[];d<i.length;d++)o=i[d],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&f.push(r[o][0]),r[o]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);for(u&&u(t);f.length;)f.shift()();return c.push.apply(c,s||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],a=!0,i=1;i<n.length;i++){var l=n[i];0!==r[l]&&(a=!1)}a&&(c.splice(t--,1),e=o(o.s=n[0]))}return e}var a={},r={5:0},c=[];function o(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=a,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(n,a,function(t){return e[t]}.bind(null,a));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var i=window.webpackJsonp=window.webpackJsonp||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var s=0;s<i.length;s++)t(i[s]);var u=l;c.push([197,0,1]),n()}({10:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return o}));var a=n(0),r=n(46);function c(e,t){const n={};for(const a in e)e.hasOwnProperty(a)&&t.includes(a)&&(n[a]=e[a].newValue);return n}function o(e){const[t,n]=Object(a.useState)(null),o=Object(a.useMemo)((()=>Object.keys(e)),[e]),i=Object(a.useCallback)(((e,t)=>{n((n=>{if(!n)return n;const a="function"==typeof e?e(n):e;return!a||Object(r.a)(a)?n:(t||browser.storage.local.set(a),{...n,...a})}))}),[]);return Object(a.useEffect)((()=>{browser.storage.local.get(e).then((e=>{n(e)}))}),[e]),Object(a.useEffect)((()=>{const e=(e,t)=>{if("local"!==t)return;const n=c(e,o);Object(r.a)(n)||i(n,!0)};return browser.storage.onChanged.addListener(e),()=>{browser.storage.onChanged.removeListener(e)}}),[i,o]),[t,i]}},12:function(e,t,n){"use strict";var a=n(8),r=n(13),c=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,o=/^\w*$/;var i=function(e,t){if(Object(a.a)(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!Object(r.a)(e))||(o.test(e)||!c.test(e)||null!=t&&e in Object(t))},l=n(32);function s(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var a=arguments,r=t?t.apply(this,a):a[0],c=n.cache;if(c.has(r))return c.get(r);var o=e.apply(this,a);return n.cache=c.set(r,o)||c,o};return n.cache=new(s.Cache||l.a),n}s.Cache=l.a;var u=s;var d=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,f=/\\(\\)?/g,m=function(e){var t=u(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(d,(function(e,n,a,r){t.push(a?r.replace(f,"$1"):n||e)})),t})),p=n(14);var v=function(e,t){for(var n=-1,a=null==e?0:e.length,r=Array(a);++n<a;)r[n]=t(e[n],n,e);return r},h=p.a?p.a.prototype:void 0,b=h?h.toString:void 0;var E=function e(t){if("string"==typeof t)return t;if(Object(a.a)(t))return v(t,e)+"";if(Object(r.a)(t))return b?b.call(t):"";var n=t+"";return"0"==n&&1/t==-Infinity?"-0":n};var g=function(e){return null==e?"":E(e)};t.a=function(e,t){return Object(a.a)(e)?e:i(e,t)?[e]:m(g(e))}},13:function(e,t,n){"use strict";var a=n(33),r=n(30);t.a=function(e){return"symbol"==typeof e||Object(r.a)(e)&&"[object Symbol]"==Object(a.a)(e)}},15:function(e,t,n){"use strict";var a=n(13);t.a=function(e){if("string"==typeof e||Object(a.a)(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t}},16:function(e,t,n){"use strict";var a=n(18),r=function(){try{var e=Object(a.a)(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();t.a=r},197:function(e,t,n){e.exports=n(207)},198:function(e,t,n){},207:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(20),o=n.n(c),i=n(74),l=n(89),s=n(56),u=n(70),d=n(4),f=n(10),m=n(22),p=n(41),v=n(49),h=n(43);l.a.onlyShowFocusOnTabs();const b=Object(i.a)(d.c,["autoClipboard"]),E=browser.runtime.getURL("/")+"settings.html#%E5%BF%AB%E6%8D%B7%E9%94%AE",g=Object(i.a)(d.e,["domainBlackList","domainWhiteList"]),O=window.navigator.userAgent.toLowerCase().includes("edg")?"Microsoft Edge":"Chrome";function y(){var e,t;const[n,c]=Object(a.useState)(),[o,i]=Object(f.a)(g),[l,d]=Object(a.useState)(),[p,v]=Object(a.useState)(!1),h=Object(a.useCallback)((()=>{v((e=>!e))}),[]),b=Object(a.useCallback)(((e,t)=>{i((n=>{if(!n)return null;const a=n[t],r=a.findIndex((t=>t.host===e.host&&t.path===e.path));if(r>=0){const e=a.slice();return e.splice(r,1),{[t]:e}}return null}))}),[i]),E=Object(a.useCallback)(((e,t)=>{i((n=>{if(!n)return null;const a=n[t].slice();return a.push(e),{[t]:a}}))}),[i]);Object(a.useEffect)((()=>{Object(u.a)().then(c)}),[]),Object(a.useEffect)((()=>{d(o&&n?Object(m.b)(n,o.domainBlackList,o.domainWhiteList):void 0)}),[o,n]);const O=null==l?void 0:l.matchedRule,y=(null===(e=null==l?void 0:l.urlParts)||void 0===e?void 0:e.host)||"",j=(null===(t=null==l?void 0:l.urlParts)||void 0===t?void 0:t.path)||"",w=l&&l.whiteListMatched||l&&!l.matchedRule?"启用":"禁用";return r.a.createElement("div",{style:{padding:"8px 8px 0 8px"}},r.a.createElement(s.c,{onClick:h,fill:!0,text:"此页面已"+w+"划词翻译",rightIcon:r.a.createElement(s.r,{icon:p?"chevron-up":"chevron-down",iconSize:12}),minimal:!0,small:!0}),r.a.createElement(s.h,{isOpen:p},!l&&r.a.createElement("span",{className:"bp3-text-muted bp3-text-small"},"在浏览器的内置页面中，只能使用划词后在右键菜单中选择“翻译这段文本”的翻译方式。"),l&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{style:{marginTop:"10px"}},r.a.createElement("div",null,"当前网站：",y),r.a.createElement("div",null,"当前页面：",j)),l.whiteListMatched&&O&&r.a.createElement("div",null,r.a.createElement("p",{className:"bp3-text-muted bp3-text-small"},"此网址命中了白名单规则 ",r.a.createElement(s.g,null,Object(m.e)(O)),"。"),r.a.createElement("p",{className:"url-actions"},r.a.createElement(s.c,{small:!0,onClick:()=>b(O,"domainWhiteList")},"删除命中的规则"))),!l.whiteListMatched&&l.blackListMatched&&O&&r.a.createElement("div",null,r.a.createElement("p",{className:"bp3-text-muted bp3-text-small"},"此网址命中了黑名单规则"," ",r.a.createElement(s.g,null,Object(m.e)(O)),"。"),r.a.createElement("p",{className:"url-actions"},r.a.createElement(s.c,{small:!0,onClick:()=>b(O,"domainBlackList")},"删除命中的规则"),r.a.createElement(s.c,{small:!0,onClick:()=>E({host:y,path:j},"domainWhiteList")},"在当前页面中启用"))),!l.whiteListMatched&&!l.blackListMatched&&r.a.createElement("div",null,r.a.createElement("p",{className:"bp3-text-muted bp3-text-small"},"此网址没有命中任何规则。"),r.a.createElement("p",{className:"url-actions"},r.a.createElement(s.c,{small:!0,onClick:()=>E({host:y,path:"/*"},"domainBlackList")},"在当前网站中禁用"),r.a.createElement(s.c,{small:!0,onClick:()=>E({host:y,path:j},"domainBlackList")},"在当前页面中禁用"))))))}function j(){const[e,t]=Object(a.useState)(!1),[n,c]=Object(a.useState)("");Object(a.useEffect)((()=>{browser.commands.getAll().then((e=>{e.some((e=>{if("panel"===e.name)return c(e.shortcut||""),!0}))}))}),[]);const o=Object(a.useCallback)((()=>{t((e=>!e))}),[]);return r.a.createElement("div",{style:{padding:"0 8px 8px 8px"}},r.a.createElement(s.c,{onClick:o,fill:!0,intent:n?"primary":"warning",text:"试一试独立翻译窗口吧",rightIcon:r.a.createElement(s.r,{icon:n?e?"chevron-up":"chevron-down":"error",iconSize:12}),minimal:!0,small:!0}),r.a.createElement(s.h,{isOpen:e},r.a.createElement("p",{className:"bp3-text-muted"},"您的浏览器支持全局快捷键！您可以在浏览器以外的地方按下快捷键",n&&r.a.createElement(r.a.Fragment,null," ",r.a.createElement("kbd",null,n)," "),"来翻译剪切板内的文本，无需切换回您的浏览器。"),n&&r.a.createElement("div",{className:"bp3-text-muted"},"您可以在",r.a.createElement("a",{href:E,target:"_blank",rel:"noreferrer"},"设置"),"中修改独立窗口的快捷键。"),!n&&r.a.createElement(s.d,{title:"未设置独立窗口快捷键",intent:"warning"},"快捷键已被占用或清除，若您要使用独立窗口，请前往划词翻译设置中为独立窗口重新分配一个快捷键，并将作用域由“在"," ",O," 中”改为“全局”。")))}n(198);o.a.render(r.a.createElement((function(){const[e,t]=Object(a.useState)(""),n=Object(a.useRef)();return Object(p.a)(),Object(a.useEffect)((()=>{browser.storage.local.get(b).then((({autoClipboard:e})=>{var a;t(e?Object(h.a)():""),null===(a=n.current)||void 0===a||a.select()}))}),[]),r.a.createElement("div",null,r.a.createElement(y,null),r.a.createElement(s.k,null),r.a.createElement(v.a,{ref:n,queryText:e,setQueryText:t,textMode:!0}),r.a.createElement(r.a.Fragment,null,r.a.createElement(s.k,null),r.a.createElement(j,null)))}),null),document.getElementById("app"))},21:function(e,t,n){"use strict";const a={name:"百度翻译",value:"BaiDuWeb",icon:browser.runtime.getURL("baidu.ico")},r={name:"有道翻译",value:"YouDaoWeb",icon:browser.runtime.getURL("youdao.ico")},c={name:"谷歌翻译",value:"GoogleWeb",icon:browser.runtime.getURL("google.ico")};t.a=[c,a,r]},22:function(e,t,n){"use strict";function a(e){return`${e.host}${e.path}`}function r(e){const t=e.match(/^([^:]+):\/\/([^/]+)?(\/.*)?$/);if(!t)return;let n=t[2]||"";const a=n.indexOf(":");a>=0&&(n=n.slice(0,a));let r=t[3]||"";const c=r.indexOf("#");if(c>=0&&(r=r.slice(0,c)),!n.startsWith(".")){if(!r){if(!n)return;r="/"}return{host:n,path:r}}}function c(e,t){return new RegExp("^"+e.replace(/[-[\]{}()+?.,\\^$|#\s]/g,"\\$&").replace("*",".*").replace(/^\.\*\\\./,"(.*\\.)?")+"$").test(t)}function o(e,t){return new RegExp("^"+e.replace(/[-[\]{}()+?.,\\^$|#\s]/g,"\\$&").replace(/\*/g,".*")+"$").test(t)}function i(e,t){let n;if(n="string"==typeof t?r(t):t,n)return{isHostMatch:{ruleHost:e.host,urlHost:n.host,matches:c(e.host,n.host)},isPathMatch:{rulePath:e.path,urlPath:n.path,matches:o(e.path,n.path)}}}function l(e,t,n){let a,i;a="string"==typeof e?r(e):e;let l=!1,s=!1;if(a){const e=e=>{const t=function(e,t){let n;if(n="string"==typeof t?r(t):t,n)return c(e.host,n.host)&&o(e.path,n.path)}(e,a);return t&&(i=e),t};l=n.some(e),l||(s=t.some(e))}return{urlParts:a,matchedRule:i,whiteListMatched:l,blackListMatched:s}}function s(e,t,n){const a=l(e,t,n);return!a.urlParts||a.whiteListMatched||!a.blackListMatched}n.d(t,"e",(function(){return a})),n.d(t,"a",(function(){return r})),n.d(t,"d",(function(){return i})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return s}))},26:function(e,t,n){"use strict";var a=/^(?:0|[1-9]\d*)$/;t.a=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&a.test(e))&&e>-1&&e%1==0&&e<t}},29:function(e,t,n){"use strict";t.a=function(e,t){return e===t||e!=e&&t!=t}},31:function(e,t,n){"use strict";var a=function(){this.__data__=[],this.size=0},r=n(29);var c=function(e,t){for(var n=e.length;n--;)if(Object(r.a)(e[n][0],t))return n;return-1},o=Array.prototype.splice;var i=function(e){var t=this.__data__,n=c(t,e);return!(n<0)&&(n==t.length-1?t.pop():o.call(t,n,1),--this.size,!0)};var l=function(e){var t=this.__data__,n=c(t,e);return n<0?void 0:t[n][1]};var s=function(e){return c(this.__data__,e)>-1};var u=function(e,t){var n=this.__data__,a=c(n,e);return a<0?(++this.size,n.push([e,t])):n[a][1]=t,this};function d(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var a=e[t];this.set(a[0],a[1])}}d.prototype.clear=a,d.prototype.delete=i,d.prototype.get=l,d.prototype.has=s,d.prototype.set=u;t.a=d},32:function(e,t,n){"use strict";var a=n(18),r=Object(a.a)(Object,"create");var c=function(){this.__data__=r?r(null):{},this.size=0};var o=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},i=Object.prototype.hasOwnProperty;var l=function(e){var t=this.__data__;if(r){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return i.call(t,e)?t[e]:void 0},s=Object.prototype.hasOwnProperty;var u=function(e){var t=this.__data__;return r?void 0!==t[e]:s.call(t,e)};var d=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this};function f(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var a=e[t];this.set(a[0],a[1])}}f.prototype.clear=c,f.prototype.delete=o,f.prototype.get=l,f.prototype.has=u,f.prototype.set=d;var m=f,p=n(31),v=n(38);var h=function(){this.size=0,this.__data__={hash:new m,map:new(v.a||p.a),string:new m}};var b=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};var E=function(e,t){var n=e.__data__;return b(t)?n["string"==typeof t?"string":"hash"]:n.map};var g=function(e){var t=E(this,e).delete(e);return this.size-=t?1:0,t};var O=function(e){return E(this,e).get(e)};var y=function(e){return E(this,e).has(e)};var j=function(e,t){var n=E(this,e),a=n.size;return n.set(e,t),this.size+=n.size==a?0:1,this};function w(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var a=e[t];this.set(a[0],a[1])}}w.prototype.clear=h,w.prototype.delete=g,w.prototype.get=O,w.prototype.has=y,w.prototype.set=j;t.a=w},34:function(e,t,n){"use strict";t.a=function(e,t){for(var n=-1,a=t.length,r=e.length;++n<a;)e[r+n]=t[n];return e}},35:function(e,t,n){"use strict";var a=n(40),r=n(29),c=Object.prototype.hasOwnProperty;t.a=function(e,t,n){var o=e[t];c.call(e,t)&&Object(r.a)(o,n)&&(void 0!==n||t in e)||Object(a.a)(e,t,n)}},37:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var a=n(0),r=n.n(a),c=n(84),o=n(56),i=n(45);const l="自动检测",s=[{zhName:l,pinyin:"zidongjiance"}].concat(i),u=c.a.ofType(),d=(e,{handleClick:t,modifiers:n})=>n.matchesPredicate?r.a.createElement(o.u,{onClick:t,active:n.active,key:e.zhName,text:e.zhName}):null,f=(e,t,n,a)=>{const r=e.toLowerCase();return a?t.zhName===r:t.zhName.includes(r)||t.pinyin.includes(r)};function m(e){const t=Object(a.useMemo)((()=>e.addAuto?s:i),[e.addAuto]),[n,c]=Object(a.useState)(null);return Object(a.useEffect)((()=>{const n=e.lang||l,a=t.find((e=>e.zhName===n))||null;c(a)}),[t,e.lang]),r.a.createElement(u,{className:"lang-select",onItemSelect:t=>{e.setLang(t.zhName===l?"":t.zhName)},activeItem:n,items:t,itemRenderer:d,itemPredicate:f,noResults:"没有搜索结果",inputProps:{placeholder:"使用拼音或中文搜索"},popoverProps:{usePortal:!1,modifiers:e.offset?{offset:{offset:e.offset}}:void 0}},r.a.createElement(o.c,{rightIcon:"caret-down",text:n?n.zhName:"请选择",small:null==e.small||e.small}))}},39:function(e,t,n){"use strict";var a=n(12),r=n(15);t.a=function(e,t){for(var n=0,c=(t=Object(a.a)(t,e)).length;null!=e&&n<c;)e=e[Object(r.a)(t[n++])];return n&&n==c?e:void 0}},4:function(e,t,n){"use strict";n.d(t,"e",(function(){return a})),n.d(t,"a",(function(){return r})),n.d(t,"d",(function(){return c})),n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"f",(function(){return l}));const a={button:!0,modifierKey:!0,domainBlackList:[],domainWhiteList:[],textList:[{name:"忽略中文",readonly:!0,enabled:!1,value:"[\\u4e00-\\u9fa5]",description:"如果划选的文本当中包含中文，则不弹出翻译按钮或翻译结果。"},{name:"忽略字符",readonly:!0,enabled:!0,value:"^[\\s.\\-0-9()•+]+$",description:"如果划选的文本全部都是由数字、点、括号、空格、横线、加号和圆点（即 •，多用于密码框）组成的，则不弹出翻译按钮或翻译结果。"}],placement:"bottom"},r={darkMode:"system"},c={pdfAuto:!0},o={width:250,destination:"中文(简体)",secondDestination:"英语",showTextArea:!1,selectedAPIs:["BaiDuWeb"],autoClipboard:!0},i={region:"cn"},l={tipPanelSettingsClosed:!1}},40:function(e,t,n){"use strict";var a=n(16);t.a=function(e,t,n){"__proto__"==t&&a.a?Object(a.a)(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},41:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(0),r=n(10),c=n(4);function o(e=document.body){const[t,n]=Object(r.a)(c.a),o=Object(a.useCallback)((e=>{n({darkMode:e})}),[n]),i=null==t?void 0:t.darkMode;return Object(a.useEffect)((()=>{if(e)switch(i){case"open":return void t(!0);case"close":return void t(!1);case"system":const e=window.matchMedia("(prefers-color-scheme: dark)");t(e.matches);const n=()=>{t(e.matches)};return e.addEventListener("change",n),()=>{e.removeEventListener("change",n)}}function t(t){null==e||e.classList[t?"add":"remove"]("bp3-dark")}}),[i,e]),{darkMode:i,setDarkMode:o}}},43:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return i}));var a=function(){};let r,c=()=>{c=a,r=document.createElement("textarea"),r.style.position="absolute",r.style.top="-99999px",document.body.appendChild(r)};function o(e){c(),r.value=e,r.select(),document.execCommand("copy")}function i(){return c(),r.value="",r.focus(),document.execCommand("paste"),r.value}},49:function(e,t,n){"use strict";var a=n(0),r=n.n(a),c=n(56),o=n(3),i=n.n(o);function l(){window.location.reload()}function s(){return r.a.createElement(c.v,{description:"划词翻译内部出现了一个错误，这可能是划词翻译自动更新了导致的，刷新网页即可恢复。",action:r.a.createElement(c.c,{small:!0,onClick:l},"刷新网页")})}var u=n(10),d=n(4);const f={BaiDuWeb:"https://fanyi.baidu.com",YouDaoWeb:"http://fanyi.youdao.com",GoogleWeb:"https://translate.google."};function m(e){const{api:t,onRetry:n}=e;let a=f[t.value];const[o]=Object(u.a)(d.b);return"GoogleWeb"===t.value&&(a+=o?o.region:d.b.region),r.a.createElement(c.v,{description:r.a.createElement(r.a.Fragment,null,"查询结果时发生了网络错误，请确认您能否正常打开"," ",r.a.createElement("a",{href:a,target:"_blank",rel:"noreferrer"},a),"。"),action:r.a.createElement(c.c,{small:!0,onClick:n},"重试")})}function p(e){return r.a.createElement(c.v,{description:"查询超时，请稍后重试。",action:r.a.createElement(c.c,{small:!0,onClick:e.onRetry},"重试")})}function v(e){return r.a.createElement(c.v,{description:e.api.name+"不支持源语种或目标语种。"})}function h(e){return r.a.createElement(c.v,{description:"查询结果时发生了未知错误，请稍后重试。",action:r.a.createElement(c.c,{small:!0,onClick:e.onRetry},"重试")})}function b(e){const{api:t,onRetry:n}=e;return r.a.createElement(c.v,{description:t.name+"返回了错误的数据，请点击下方按钮重试。",action:r.a.createElement(c.c,{small:!0,onClick:n},"重试")})}var E=n(43),g=n(21);const O=r.a.createElement(c.r,{icon:"volume-up",iconSize:12});function y(e){const t=e.uri;return r.a.createElement(c.c,{icon:O,small:!0,minimal:!0,disabled:!t,onClick:t?()=>async function(e){const t=await browser.runtime.sendMessage({action:"audio",url:e});(null==t?void 0:t.error)&&window.alert("播放失败，请稍后重试。")}(t):void 0,title:t?"朗读":"不支持此语种"})}function j(e){const{apiId:t,queryText:n,source:o,resultChanged:l,destination:u}=e,[d,f]=Object(a.useState)(!1),[O,j]=Object(a.useState)(null),[w,_]=Object(a.useState)(null),[k,x]=Object(a.useState)(0),[C,N]=Object(a.useState)("duplicate"),[S,P]=Object(a.useState)(),R=Object(a.useMemo)((()=>g.a.find((e=>e.value===t))),[t]),A=Object(a.useCallback)((()=>{x((e=>e+1))}),[]),L=Object(a.useCallback)((()=>{if(O){const e=[];O.phonetic&&e.push(O.phonetic.map((e=>`${e.name?e.name+" ":""}/${e.value}/`))),O.dict?e.push(...O.dict.map((e=>`${e.pos?e.pos+("GoogleWeb"===t?": ":" "):""}${e.terms.join(", ")}`))):O.result&&e.push(...O.result),Object(E.b)(e.join("\n")),N("tick"),P("success"),window.setTimeout((()=>{N("duplicate"),P(void 0)}),1e3)}}),[t,O]);return Object(a.useEffect)((()=>{if(!n)return;let e=!1;return(async()=>{let t;f(!0),j(null),_(null),l&&l();try{t=await browser.runtime.sendMessage({action:"translate",data:{apiCode:R.value,text:n,source:o}})}catch(t){if(e)return;_({code:"BACKGROUND_DISCONNECTED"})}e||(f(!1),t&&(j(t.data),_(t.error)),l&&l())})(),()=>{e=!0}}),[R.value,n,l,o,k,u]),r.a.createElement(c.e,{className:"result-block"},r.a.createElement("div",{className:"legend"},r.a.createElement("div",{className:"legend-left"},r.a.createElement("span",{className:"api-ico",style:{backgroundImage:`url(${R.icon})`}}),r.a.createElement(c.p,null,R.name),r.a.createElement("span",{className:"source"},null==O?void 0:O.from),!(null==O?void 0:O.phonetic)&&r.a.createElement(y,{uri:null==O?void 0:O.ttsURI})),r.a.createElement("div",null,!w&&!d&&r.a.createElement(r.a.Fragment,null,r.a.createElement(c.c,{onClick:L,icon:r.a.createElement(c.r,{icon:C,iconSize:12}),minimal:!0,small:!0,intent:S,title:"复制翻译结果"}),r.a.createElement(c.b,{disabled:!(null==O?void 0:O.link),target:"_blank",href:(null==O?void 0:O.link)||"",icon:r.a.createElement(c.r,{icon:"share",iconSize:12}),minimal:!0,small:!0,title:"查看详细结果"})))),r.a.createElement("div",{style:{display:d?"block":"none"}},r.a.createElement("p",{className:i()({"bp3-skeleton":d})},"1"),r.a.createElement("p",{className:i()({"bp3-skeleton":d})},"1"),r.a.createElement("p",{className:i()({"bp3-skeleton":d}),style:{width:"150px"}},"1")),w&&r.a.createElement("div",{className:"error"},function(e,t){const{api:n,onRetry:a}=t;switch(e){case"BACKGROUND_DISCONNECTED":return r.a.createElement(s,null);case"NETWORK_ERROR":return r.a.createElement(m,{api:n,onRetry:a});case"NETWORK_TIMEOUT":return r.a.createElement(p,{onRetry:a});case"UNSUPPORTED_LANG":return r.a.createElement(v,{api:n});case"API_SERVER_ERROR":return r.a.createElement(b,{api:n,onRetry:a});default:return r.a.createElement(h,{onRetry:a})}}(w.code,{api:R,onRetry:A})),(null==O?void 0:O.phonetic)&&r.a.createElement("div",{className:"phonetic"},O.phonetic.map(((e,t)=>r.a.createElement("div",{key:t,className:"phonetic-item"},e.name&&r.a.createElement("span",null,e.name),e.value&&r.a.createElement("span",null,`/${e.value}/`),e.ttsURI&&r.a.createElement(y,{uri:e.ttsURI}))))),O&&r.a.createElement("div",{className:"common-result"},O.dict&&r.a.createElement("div",{className:"dict"},O.dict.map(((e,n)=>r.a.createElement("p",{key:n},e.pos&&r.a.createElement("span",{className:"dict-pos"},e.pos,"GoogleWeb"===t?": ":""),e.terms.join(", "))))),!O.dict&&O.result&&r.a.createElement("div",{className:"general-result"},O.result.map(((e,n)=>r.a.createElement("p",{key:n},e,r.a.createElement(y,{uri:{text:e,apiId:t,source:null==O?void 0:O.to}})))))))}var w=n(74),_=n(75);const k=Object(w.a)(d.c,"selectedAPIs");function x(){const[e,t]=Object(u.a)(k),n=Object(a.useCallback)((e=>{const n=e.value;t((e=>{if(e.selectedAPIs.indexOf(n)>=0)return null;const t=e.selectedAPIs.slice();return t.push(n),{selectedAPIs:t}}))}),[t]);return r.a.createElement(r.a.Fragment,null,g.a.map((t=>r.a.createElement(c.u,{key:t.value,text:t.name,onClick:()=>n(t),disabled:!e||e.selectedAPIs.includes(t.value)}))))}var C=n(37);function N(){browser.runtime.sendMessage({action:"open options page"})}const S=Object(w.a)(d.c,"selectedAPIs","showTextArea","destination"),P=Object(w.a)(d.f,["tipPanelSettingsClosed"]);t.a=Object(a.forwardRef)((function(e,t){const{queryText:n,setQueryText:o,onResultChanged:i,headerLeft:l,headerRight:s,hoverTranslate:d,textMode:f=!1}=e,[m,p]=Object(u.a)(S),v=m||S,h=Object(a.useCallback)((e=>{p({destination:e})}),[p]),b=Object(a.useCallback)((e=>{p({showTextArea:e.target.checked})}),[p]),E=Object(a.useCallback)(((e,t)=>{const n=e.value;p((e=>{const a=[...e.selectedAPIs],r=a.indexOf(n);if(t){if(r<0)return a.push(n),{selectedAPIs:a}}else if(r>=0)return a.splice(r,1),{selectedAPIs:a}}))}),[p]),[O,y]=Object(a.useState)(""),[w,k]=Object(a.useState)(n),R=Object(a.useRef)(null),[A,L]=Object(a.useState)(!1),M=Object(a.useMemo)((()=>Object(_.a)((e=>{o(e)}),1e3)),[o]),I=Object(a.useCallback)((e=>{const t=e.target.value;k(t),M(t)}),[M]),T=Object(a.useCallback)((()=>{L((e=>!e))}),[]);Object(a.useEffect)((()=>{k(n)}),[n]),Object(a.useImperativeHandle)(t,(()=>({select:()=>{window.setTimeout((()=>{R.current&&(R.current.focus(),R.current.select())}))}})));const[z,$]=Object(a.useState)(!1),W=Object(a.useCallback)((()=>{$(!1),browser.storage.local.set({tipPanelSettingsClosed:!0})}),[]);return Object(a.useEffect)((()=>{browser.storage.local.get(P).then((({tipPanelSettingsClosed:e})=>{e||$(!0)}))}),[]),r.a.createElement("div",{id:"translate-panel"},r.a.createElement("div",{className:"header"},l,r.a.createElement("div",{className:"drag-block"}),r.a.createElement("div",{className:"right"},r.a.createElement(c.w,{enforceFocus:!1,content:r.a.createElement("div",{className:"bp3-text-small",style:{width:"200px",padding:"5px"}},"添加 / 隐藏翻译源、语种切换、鼠标悬浮取词开关和显示翻译文本开关在这里。",r.a.createElement("a",{onClick:W},"不再提示")),canEscapeKeyClose:!1,isOpen:z,usePortal:!1},r.a.createElement(c.c,{icon:r.a.createElement(c.r,{icon:"cog",iconSize:14}),small:!0,minimal:!0,className:"settings",onClick:T})),s)),r.a.createElement(c.h,{isOpen:A,keepChildrenMounted:!0},r.a.createElement(c.e,{className:"quick-settings"},r.a.createElement("div",null,r.a.createElement(C.a,{lang:O,setLang:y,addAuto:!0}),r.a.createElement(c.r,{icon:"arrow-right",iconSize:12,style:{margin:"0 10px"}}),r.a.createElement(C.a,{lang:v.destination,setLang:h,offset:f?-110:void 0})),r.a.createElement("div",null,g.a.map((e=>r.a.createElement(c.f,{inline:!0,label:e.name.slice(0,2),key:e.value,checked:v.selectedAPIs.includes(e.value),onChange:t=>E(e,t.target.checked)})))),!f&&r.a.createElement("div",null,r.a.createElement(c.f,{inline:!0,label:"显示文本框",checked:v.showTextArea,onChange:b}),d),r.a.createElement("a",{onClick:N,className:"bp3-text-small"},"打开完整设置"))),r.a.createElement("div",{className:"query-text",style:{display:f||!f&&v.showTextArea?"":"none"}},r.a.createElement(c.B,{fill:!0,inputRef:e=>R.current=e,value:w,onChange:I})),r.a.createElement("div",{className:"body"},!n&&r.a.createElement("p",null,"请输入需要翻译的文本。"),n&&(null==m?void 0:m.selectedAPIs.map((e=>r.a.createElement(j,{key:e,apiId:e,queryText:n,source:O,destination:v.destination,resultChanged:i})))),!(null==m?void 0:m.selectedAPIs.length)&&r.a.createElement(c.v,{className:"no-api",title:"你隐藏了所有翻译源",description:"请添加一个翻译源来显示翻译结果。",action:r.a.createElement(c.w,{usePortal:!1,content:r.a.createElement(c.t,null,r.a.createElement(x,null))},r.a.createElement(c.c,{icon:"add",text:"添加翻译源"}))})))}))},70:function(e,t,n){"use strict";async function a(e){try{return void 0===e?(await browser.tabs.executeScript({code:"window.location.href",runAt:"document_start"}))[0]:(await browser.tabs.executeScript(e,{code:"window.location.href",runAt:"document_start"}))[0]}catch(e){}}n.d(t,"a",(function(){return a}))},74:function(e,t,n){"use strict";var a=n(39),r=n(35),c=n(12),o=n(26),i=n(11),l=n(15);var s=function(e,t,n,a){if(!Object(i.a)(e))return e;for(var s=-1,u=(t=Object(c.a)(t,e)).length,d=u-1,f=e;null!=f&&++s<u;){var m=Object(l.a)(t[s]),p=n;if(s!=d){var v=f[m];void 0===(p=a?a(v,m,f):void 0)&&(p=Object(i.a)(v)?v:Object(o.a)(t[s+1])?[]:{})}Object(r.a)(f,m,p),f=f[m]}return e};var u=function(e,t,n){for(var r=-1,o=t.length,i={};++r<o;){var l=t[r],u=Object(a.a)(e,l);n(u,l)&&s(i,Object(c.a)(l,e),u)}return i};var d=function(e,t){return null!=e&&t in Object(e)},f=n(27),m=n(8),p=n(44);var v=function(e,t,n){for(var a=-1,r=(t=Object(c.a)(t,e)).length,i=!1;++a<r;){var s=Object(l.a)(t[a]);if(!(i=null!=e&&n(e,s)))break;e=e[s]}return i||++a!=r?i:!!(r=null==e?0:e.length)&&Object(p.a)(r)&&Object(o.a)(s,r)&&(Object(m.a)(e)||Object(f.a)(e))};var h=function(e,t){return null!=e&&v(e,t,d)};var b=function(e,t){return u(e,t,(function(t,n){return h(e,n)}))},E=n(34),g=n(14),O=g.a?g.a.isConcatSpreadable:void 0;var y=function(e){return Object(m.a)(e)||Object(f.a)(e)||!!(O&&e&&e[O])};var j=function e(t,n,a,r,c){var o=-1,i=t.length;for(a||(a=y),c||(c=[]);++o<i;){var l=t[o];n>0&&a(l)?n>1?e(l,n-1,a,r,c):Object(E.a)(c,l):r||(c[c.length]=l)}return c};var w=function(e){return(null==e?0:e.length)?j(e,1):[]};var _=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)},k=Math.max;var x=function(e,t,n){return t=k(void 0===t?e.length-1:t,0),function(){for(var a=arguments,r=-1,c=k(a.length-t,0),o=Array(c);++r<c;)o[r]=a[t+r];r=-1;for(var i=Array(t+1);++r<t;)i[r]=a[r];return i[t]=n(o),_(e,this,i)}};var C=function(e){return function(){return e}},N=n(16);var S=function(e){return e},P=N.a?function(e,t){return Object(N.a)(e,"toString",{configurable:!0,enumerable:!1,value:C(t),writable:!0})}:S,R=Date.now;var A=function(e){var t=0,n=0;return function(){var a=R(),r=16-(a-n);if(n=a,r>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(P);var L=function(e){return A(x(e,void 0,w),e+"")}((function(e,t){return null==e?{}:b(e,t)}));t.a=L},75:function(e,t,n){"use strict";var a=n(11),r=n(17),c=function(){return r.a.Date.now()},o=n(13),i=/^\s+|\s+$/g,l=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,u=/^0o[0-7]+$/i,d=parseInt;var f=function(e){if("number"==typeof e)return e;if(Object(o.a)(e))return NaN;if(Object(a.a)(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Object(a.a)(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(i,"");var n=s.test(e);return n||u.test(e)?d(e.slice(2),n?2:8):l.test(e)?NaN:+e},m=Math.max,p=Math.min;t.a=function(e,t,n){var r,o,i,l,s,u,d=0,v=!1,h=!1,b=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function E(t){var n=r,a=o;return r=o=void 0,d=t,l=e.apply(a,n)}function g(e){return d=e,s=setTimeout(y,t),v?E(e):l}function O(e){var n=e-u;return void 0===u||n>=t||n<0||h&&e-d>=i}function y(){var e=c();if(O(e))return j(e);s=setTimeout(y,function(e){var n=t-(e-u);return h?p(n,i-(e-d)):n}(e))}function j(e){return s=void 0,b&&r?E(e):(r=o=void 0,l)}function w(){var e=c(),n=O(e);if(r=arguments,o=this,u=e,n){if(void 0===s)return g(u);if(h)return clearTimeout(s),s=setTimeout(y,t),E(u)}return void 0===s&&(s=setTimeout(y,t)),l}return t=f(t)||0,Object(a.a)(n)&&(v=!!n.leading,i=(h="maxWait"in n)?m(f(n.maxWait)||0,t):i,b="trailing"in n?!!n.trailing:b),w.cancel=function(){void 0!==s&&clearTimeout(s),d=0,r=u=o=s=void 0},w.flush=function(){return void 0===s?l:j(c())},w}},89:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(7),r=n(52),c="undefined"!=typeof document?new r.a(document.documentElement,a.FOCUS_DISABLED):{isActive:function(){return!0},start:function(){return!0},stop:function(){return!0}},o={alwaysShowFocus:function(){return c.stop()},isActive:function(){return c.isActive()},onlyShowFocusOnTabs:function(){return c.start()}}}});