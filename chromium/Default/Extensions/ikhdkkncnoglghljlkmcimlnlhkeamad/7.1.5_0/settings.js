!function(e){function t(t){for(var n,r,i=t[0],u=t[1],o=t[2],m=0,d=[];m<i.length;m++)r=i[m],Object.prototype.hasOwnProperty.call(l,r)&&l[r]&&d.push(l[r][0]),l[r]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(e[n]=u[n]);for(s&&s(t);d.length;)d.shift()();return c.push.apply(c,o||[]),a()}function a(){for(var e,t=0;t<c.length;t++){for(var a=c[t],n=!0,i=1;i<a.length;i++){var u=a[i];0!==l[u]&&(n=!1)}n&&(c.splice(t--,1),e=r(r.s=a[0]))}return e}var n={},l={6:0},c=[];function r(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=n,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(a,n,function(t){return e[t]}.bind(null,n));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="";var i=window.webpackJsonp=window.webpackJsonp||[],u=i.push.bind(i);i.push=t,i=i.slice();for(var o=0;o<i.length;o++)t(i[o]);var s=u;c.push([199,0,1]),a()}({10:function(e,t,a){"use strict";a.d(t,"b",(function(){return c})),a.d(t,"a",(function(){return r}));var n=a(0),l=a(46);function c(e,t){const a={};for(const n in e)e.hasOwnProperty(n)&&t.includes(n)&&(a[n]=e[n].newValue);return a}function r(e){const[t,a]=Object(n.useState)(null),r=Object(n.useMemo)((()=>Object.keys(e)),[e]),i=Object(n.useCallback)(((e,t)=>{a((a=>{if(!a)return a;const n="function"==typeof e?e(a):e;return!n||Object(l.a)(n)?a:(t||browser.storage.local.set(n),{...a,...n})}))}),[]);return Object(n.useEffect)((()=>{browser.storage.local.get(e).then((e=>{a(e)}))}),[e]),Object(n.useEffect)((()=>{const e=(e,t)=>{if("local"!==t)return;const a=c(e,r);Object(l.a)(a)||i(a,!0)};return browser.storage.onChanged.addListener(e),()=>{browser.storage.onChanged.removeListener(e)}}),[i,r]),[t,i]}},199:function(e,t,a){e.exports=a(205)},200:function(e,t,a){},205:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),c=a(20),r=a.n(c),i=a(89),u=a(56),o=a(41),s=a(71),m=a.n(s);function d(){const[e,t]=Object(n.useState)(!1),a=Object(n.useCallback)((e=>{e.preventDefault(),t(!0)}),[]),c=Object(n.useCallback)((()=>{t(!1)}),[]);return l.a.createElement(l.a.Fragment,null,l.a.createElement("a",{onClick:a},"查看范例"),l.a.createElement(u.j,{isOpen:e,onClose:c,title:"范例",className:"example-dialog"},l.a.createElement("div",{className:"bp3-dialog-body"},l.a.createElement(u.q,{bordered:!0,condensed:!0,striped:!0},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"规则"),l.a.createElement("th",null,"匹配的网址"),l.a.createElement("th",null,"不匹配的网址"))),l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("p",null,"*/*"),l.a.createElement("p",null,"匹配任意网址。")),l.a.createElement("td",null,l.a.createElement("p",null,"limingkai.cn"),l.a.createElement("p",null,"hcfy.limingkai.cn"),l.a.createElement("p",null,"baidu.com/search"),l.a.createElement("p",null,"jd.com/item.html")),l.a.createElement("td",null,l.a.createElement("p",null,"没有不匹配的网址"))),l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("p",null,"*.limingkai.cn/*"),l.a.createElement("p",null,"匹配 ",l.a.createElement(u.g,null,"limingkai.cn")," 或者所有域名以"," ",l.a.createElement(u.g,null,".limingkai.cn")," 结尾的网址，网址可以有任意路径。")),l.a.createElement("td",null,l.a.createElement("p",null,"limingkai.cn"),l.a.createElement("p",null,"hcfy.limingkai.cn"),l.a.createElement("p",null,"hcfy.limingkai.cn/path"),l.a.createElement("p",null,"aaa.hcfy.limingkai.cn")),l.a.createElement("td",null,l.a.createElement("p",null,"limingkai.org ",l.a.createElement(u.A,null,"域名不匹配")),l.a.createElement("p",null,"baidu.com ",l.a.createElement(u.A,null,"域名不匹配")))),l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("p",null,"limingkai.cn/*"),l.a.createElement("p",null,"匹配域名是 ",l.a.createElement(u.g,null,"limingkai.cn")," 的所有网址。")),l.a.createElement("td",null,l.a.createElement("p",null,"limingkai.cn"),l.a.createElement("p",null,"limingkai.cn/path")),l.a.createElement("td",null,l.a.createElement("p",null,"hcfy.limingkai.cn ",l.a.createElement(u.A,null,"域名不匹配")))),l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("p",null,"limingkai.cn/"),l.a.createElement("p",null,"仅匹配 ",l.a.createElement(u.g,null,"limingkai.cn")," 这一个网址。")),l.a.createElement("td",null,l.a.createElement("p",null,"limingkai.cn")),l.a.createElement("td",null,l.a.createElement("p",null,"hcfy.limingkai.cn ",l.a.createElement(u.A,null,"域名不匹配")),l.a.createElement("p",null,"limingkai.cn/path ",l.a.createElement(u.A,null,"路径不匹配")))),l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("p",null,"*/path"),l.a.createElement("p",null,"匹配任意域名的网址，但路径部分只能是 ",l.a.createElement(u.g,null,"path"),"。")),l.a.createElement("td",null,l.a.createElement("p",null,"hcfy.limingkai.cn/path"),l.a.createElement("p",null,"baidu.com/path")),l.a.createElement("td",null,l.a.createElement("p",null,"hcfy.limingkai.cn/a ",l.a.createElement(u.A,null,"路径不匹配")))),l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("p",null,"*/path/"),l.a.createElement("p",null,"匹配任意域名，但路径部分只能是 ",l.a.createElement(u.g,null,"path/"),"。跟上个例子相比，路径末尾多了一个 ",l.a.createElement(u.g,null,"/"),"。")),l.a.createElement("td",null,l.a.createElement("p",null,"hcfy.limingkai.cn/path/"),l.a.createElement("p",null,"baidu.com/path/")),l.a.createElement("td",null,l.a.createElement("p",null,"hcfy.limingkai.cn/path ",l.a.createElement(u.A,null,"路径不匹配")),l.a.createElement("p",null,"hcfy.limingkai.cn/path/a ",l.a.createElement(u.A,null,"路径不匹配")))),l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("p",null,"hcfy.limingkai.cn/*path*"),l.a.createElement("p",null,"匹配 ",l.a.createElement(u.g,null,"hcfy.limingkai.cn")," 域名且路径中包含"," ",l.a.createElement(u.g,null,"path")," 的网址。")),l.a.createElement("td",null,l.a.createElement("p",null,"hcfy.limingkai.cn/path"),l.a.createElement("p",null,"hcfy.limingkai.cn/abcpath"),l.a.createElement("p",null,"hcfy.limingkai.cn/abc/path"),l.a.createElement("p",null,"hcfy.limingkai.cn/abc/pathdef"),l.a.createElement("p",null,"hcfy.limingkai.cn/abc/path/def")),l.a.createElement("td",null,l.a.createElement("p",null,"hcfy.limingkai.cn/paXth ",l.a.createElement(u.A,null,"路径不匹配")),l.a.createElement("p",null,"hcfy.limingkai.cn/pa/th ",l.a.createElement(u.A,null,"路径不匹配")))),l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("p",null,"limingkai.cn/*/path/*/"),l.a.createElement("p",null,"匹配 ",l.a.createElement(u.g,null,"limingkai.cn")," 域名且路径中包含"," ",l.a.createElement(u.g,null,"path"),"、",l.a.createElement(u.g,null,"path")," 左右有路径片段且以"," ",l.a.createElement(u.g,null,"/")," 结尾的网址。")),l.a.createElement("td",null,l.a.createElement("p",null,"limingkai.cn/a/path/b/"),l.a.createElement("p",null,"limingkai.cn/a/b/path/c/d/")),l.a.createElement("td",null,l.a.createElement("p",null,"limingkai.cn/path/"," ",l.a.createElement(u.A,null,l.a.createElement(u.g,null,"path")," 左右两边没有路径片段")),l.a.createElement("p",null,"limingkai.cn/a/path/"," ",l.a.createElement(u.A,null,l.a.createElement(u.g,null,"path")," 右边没有路径片段")),l.a.createElement("p",null,"limingkai.cn/path/b/"," ",l.a.createElement(u.A,null,l.a.createElement(u.g,null,"path")," 左边没有路径片段")))))))))}var E=a(22);const p={host:"",path:"/*"};function h(e,t){switch(t.type){case"reset":return p;case"merge":return{...e,...t.data};default:throw new TypeError("不支持的 action type: "+JSON.stringify(t))}}function f(e){const{isOpen:t,setIsOpen:a,onSave:c,isExists:r,name:i}=e,[o,s]=Object(n.useState)(!1),m=Object(n.useCallback)((()=>{s(!1)}),[]),f=Object(n.useRef)(null),b=Object(n.useCallback)((()=>{var e;null===(e=f.current)||void 0===e||e.focus()}),[]),g=Object(n.useCallback)((()=>{a(!1),v({type:"reset"}),P("")}),[a]),[k,v]=Object(n.useReducer)(h,p),O=Object(n.useMemo)((()=>function(e){const t=e.host;return!!t&&("*"===t||!t.includes("*")||/^\*\.[^*]+$/.test(t))}(k)),[k]),y=Object(n.useCallback)((()=>{var e;O?r(k)?s(!0):(c(k),g()):null===(e=f.current)||void 0===e||e.focus()}),[g,r,c,k,O]),j=Object(n.useCallback)((e=>{v({type:"merge",data:{host:e.target.value.trim()}})}),[]),x=Object(n.useCallback)((e=>{let t=e.target.value.trim();"/"!==t[0]&&(t="/"+t),v({type:"merge",data:{path:t}})}),[]),C=Object(n.useCallback)((e=>{var t;const a=null===(t=e.clipboardData)||void 0===t?void 0:t.getData("text");if(a){const t=Object(E.a)(a);t&&(e.preventDefault(),v({type:"merge",data:t}))}}),[]),[w,P]=Object(n.useState)(""),N=Object(n.useCallback)((e=>{P(e.target.value.trim())}),[]),M=Object(n.useMemo)((()=>O&&Object(E.d)(k,w)),[O,k,w]),A=void 0!==M,L=M&&M.isHostMatch.matches&&M.isPathMatch.matches;return l.a.createElement(u.j,{canEscapeKeyClose:!1,canOutsideClickClose:!1,isOpen:t,onClose:g,onOpening:b,title:"新增"+i+"规则",className:"edit-rule-dialog"},l.a.createElement("div",{className:"bp3-dialog-body"},l.a.createElement(u.l,{label:"规则的格式"},l.a.createElement("div",{className:"bp3-form-helper-text"},"规则由“网站”和“页面”两个部分组成，在这两个部分中都可以使用通配符"," ",l.a.createElement(u.g,null,"*"),"。",l.a.createElement(u.D,null,l.a.createElement("li",null,"在“网站”中：",l.a.createElement(u.D,null,l.a.createElement("li",null,"可以有一个或 0 个通配符。如果有，则必须以通配符开头；"),l.a.createElement("li",null,"如果只填写了通配符，则表示匹配所有域名；"),l.a.createElement("li",null,"如果填写了以 ",l.a.createElement(u.g,null,"*.")," ","开头的域名，则表示匹配所有以这个域名结尾的域名；"),l.a.createElement("li",null,"你也可以不使用通配符来匹配单一的域名。"))),l.a.createElement("li",null,"在“页面”中：",l.a.createElement(u.D,null,l.a.createElement("li",null,"可以使用任意多个通配符，每个通配符表示匹配 0 个或多个任意字符；"),l.a.createElement("li",null,"页面必须以 ",l.a.createElement(u.g,null,"/")," 开头；"),l.a.createElement("li",null,"页面部分默认填写了 ",l.a.createElement(u.g,null,"/*"),"，表示匹配任意页面。")))),l.a.createElement(d,null))),l.a.createElement(u.o,null,"填写规则"),l.a.createElement(u.l,null,l.a.createElement(u.i,null,l.a.createElement(u.s,{placeholder:"域名",value:k.host,inputRef:f,onChange:j,onPaste:C}),l.a.createElement(u.s,{placeholder:"路径",value:k.path,onChange:x,onPaste:C})),k.host&&!O&&l.a.createElement(u.d,{icon:null,intent:"warning"},"域名格式不正确")),l.a.createElement(u.o,null,"测试"," ",O&&l.a.createElement(u.g,{style:{fontWeight:"normal"}},Object(E.e)(k))),l.a.createElement(u.l,null,l.a.createElement(u.s,{value:w,onChange:N,placeholder:"你可以填写一个网址来测试是否跟规则匹配"}),w&&!A&&l.a.createElement(u.d,{icon:null,intent:"warning"},"网址格式不正确"),M&&A&&L&&l.a.createElement(u.d,{title:"匹配"}),M&&A&&!L&&l.a.createElement(u.d,{title:"不匹配"},M.isHostMatch.matches||l.a.createElement("p",null,"网址的域名 ",l.a.createElement(u.g,null,M.isHostMatch.urlHost)," ","不匹配规则 ",l.a.createElement(u.g,null,M.isHostMatch.ruleHost)),M.isPathMatch.matches||l.a.createElement("p",null,"网址的路径 ",l.a.createElement(u.g,null,M.isPathMatch.urlPath)," ","不匹配规则 ",l.a.createElement(u.g,null,M.isPathMatch.rulePath))))),l.a.createElement("div",{className:"bp3-dialog-footer"},l.a.createElement("div",{className:"bp3-dialog-footer-actions"},l.a.createElement(u.c,{onClick:g},"取消"),l.a.createElement(u.c,{intent:"primary",onClick:y},"保存"),l.a.createElement(u.a,{confirmButtonText:"我知道了",isOpen:o,onConfirm:m},"规则 ",l.a.createElement(u.g,null,Object(E.e)(k))," 已经有了，无需重复添加。"))))}function b(e){const{rules:t,setRules:a,name:c}=e,[r,i]=Object(n.useState)(!1),o=Object(n.useRef)(),s=Object(n.useCallback)((()=>{i(!0)}),[]),d=Object(n.useCallback)((e=>{const n=[...t];n.push(e),a(n)}),[t,a]);const[p,h]=Object(n.useState)(!1),b=Object(n.useCallback)((()=>{h(!1),o.current=void 0}),[]),g=Object(n.useCallback)((()=>{if(o.current){const e=t.indexOf(o.current);if(e>=0){const n=[...t];n.splice(e,1),a(n)}}b()}),[b,t,a]),k=Object(n.useCallback)((e=>t.some((t=>m()(t,e)))),[t]);return l.a.createElement("div",{className:"domain-rules"},l.a.createElement("div",{className:"header"},l.a.createElement(u.p,null,c),l.a.createElement(u.c,{icon:"add",onClick:s,minimal:!0})),l.a.createElement("div",{className:"table-box"},l.a.createElement(u.q,{bordered:!0,striped:!0,condensed:!0},l.a.createElement("tbody",null,t.length?t.map((e=>{const t=Object(E.e)(e);return l.a.createElement("tr",{key:t},l.a.createElement("td",null,t),l.a.createElement("td",null,l.a.createElement(u.c,{minimal:!0,icon:"delete",onClick:()=>function(e){o.current=e,h(!0)}(e)})))})):l.a.createElement("tr",null,l.a.createElement("td",{colSpan:2},l.a.createElement(u.v,{title:"没有规则",description:"黑名单"===c?l.a.createElement(l.a.Fragment,null,"命中黑名单的网址会禁用网页划词"):l.a.createElement(l.a.Fragment,null,"命中白名单的网址会始终启用网页划词"),action:l.a.createElement(u.c,{onClick:s,intent:"primary"},"添加一条规则")})))))),l.a.createElement(u.a,{icon:"trash",intent:"danger",isOpen:p,confirmButtonText:"确定",cancelButtonText:"取消",onConfirm:g,onCancel:b},"确定要从",c,"中删除"," ",l.a.createElement(u.g,null,o.current?Object(E.e)(o.current):"这条规则")," ","吗？"),l.a.createElement(f,{isOpen:r,setIsOpen:i,onSave:d,isExists:k,name:c}))}var g=a(4),k=a(10);const v=a(65).a?"⌘":"Ctrl",O={host:"*",path:"/*"},y=[{label:"上",value:"top"},{label:"上左",value:"top-end"},{label:"上右",value:"top-start"},{label:"下",value:"bottom"},{label:"下左",value:"bottom-end"},{label:"下右",value:"bottom-start"},{label:"左",value:"left"},{label:"左上",value:"left-end"},{label:"左下",value:"left-start"},{label:"右",value:"right"},{label:"右上",value:"right-end"},{label:"右下",value:"right-start"}];function j(){const[e,t]=Object(n.useState)(!1),a=Object(n.useCallback)((()=>{t((e=>!e))}),[]),[c,r]=Object(k.a)(g.e),i=null==c?void 0:c.domainBlackList,o=null==c?void 0:c.domainWhiteList,s=Object(n.useMemo)((()=>!!i&&i.some((e=>e.host===O.host&&e.path===O.path))),[i]),m=Object(n.useCallback)((e=>{const t=e.target.checked;r((e=>{const a=e.domainBlackList.findIndex((e=>e.host===O.host&&e.path===O.path));if(t&&a>=0||!t&&a<0)return;const n=e.domainBlackList.slice();return t?n.unshift(O):n.splice(a,1),{domainBlackList:n}}))}),[r]),d=Object(n.useCallback)((e=>{r({button:e.target.checked})}),[r]),p=Object(n.useCallback)((e=>{r({modifierKey:e.target.checked})}),[r]),[h,f]=Object(n.useState)(""),j=Object(n.useCallback)((e=>{f(e.target.value.trim())}),[]),x=Object(n.useMemo)((()=>Object(E.a)(h)),[h]),{matchedRule:C,whiteListMatched:w,blackListMatched:P}=Object(n.useMemo)((()=>x&&i&&o?Object(E.b)(x,i,o):{matchedRule:void 0,whiteListMatched:void 0,blackListMatched:void 0}),[i,o,x]),N=!!c;Object(n.useEffect)((()=>{if(N){const e=decodeURI(window.location.hash.slice(1));e&&(window.location.hash="",window.location.hash=e)}}),[N]);const M=Object(n.useCallback)((e=>{r({placement:e.target.value})}),[r]);return c?l.a.createElement("div",{id:"selection"},l.a.createElement(u.m,null,"网页划词"),l.a.createElement("div",{id:"使用方式",className:"settings-block"},l.a.createElement(u.n,null,"使用方式"),l.a.createElement(u.l,{helperText:l.a.createElement(l.a.Fragment,null,"启用：划词后，先弹出翻译按钮，点击按钮后再弹出翻译结果。",l.a.createElement("br",null),"关闭：划词后直接弹出翻译结果。")},l.a.createElement(u.f,{label:"先显示翻译按钮",checked:c.button,onChange:d})),l.a.createElement(u.l,{helperText:l.a.createElement(l.a.Fragment,null,"启用后，划词时按住",l.a.createElement("kbd",null,v),"键不放、或划词后按一下",l.a.createElement("kbd",null,v),"键会直接弹出翻译结果。")},l.a.createElement(u.f,{label:"配合辅助键使用",checked:c.modifierKey,onChange:p})),l.a.createElement(u.l,{helperText:"弹窗会先尝试朝这个方向显示，如果空间不够，它会自动调整方向确保处于可视区域内。"},l.a.createElement(u.y,{label:"弹窗显示方向",inline:!0,onChange:M,selectedValue:c.placement,className:"placement-group"},y.map((e=>l.a.createElement(u.x,{value:e.value,label:e.label,key:e.value})))))),l.a.createElement("div",{id:"网址筛选",className:"settings-block"},l.a.createElement(u.n,null,"网址筛选"),l.a.createElement("p",{className:"bp3-text-small bp3-text-muted"},"划词翻译支持用黑 / 白名单规则控制在某些网址下是否启用网页划词。禁用了网页划词的页面在用鼠标划词后不会显示翻译按钮或翻译窗口，而且扩展图标上会有“off”字样。"),l.a.createElement(u.d,{intent:"primary",title:"不受网址筛选限制的翻译方式"},"即使网页划词被禁用了，以下几种翻译方式仍然可用：",l.a.createElement(u.D,null,l.a.createElement("li",null,"划词时按住",l.a.createElement("kbd",null,v),"键不放（需启用“配合辅助键使用”）"),l.a.createElement("li",null,"划词后按一下",l.a.createElement("kbd",null,v),"键（需启用“配合辅助键使用”）"),l.a.createElement("li",null,"使用快捷键翻译网页中选中的文本，详情请查看左侧菜单中的“通用 - 快捷键”"),l.a.createElement("li",null,"划词后从右键菜单中选择“翻译选中的文本”。划词翻译没有权限操作的页面只能使用右键菜单翻译的方式"))),l.a.createElement(u.l,{helperText:"启用后，在所有网页中都不会弹出翻译按钮或翻译面板，但你仍然可以用上面提到的几种方式获取翻译结果。"},l.a.createElement(u.f,{label:"在所有网站中禁用网页划词",checked:s,onChange:m})),l.a.createElement("p",null,l.a.createElement(u.c,{onClick:a},e?"隐藏":"显示","黑 / 白名单规则")),l.a.createElement("p",{className:"bp3-text-small bp3-text-muted"},"通常情况下，你不需要手动修改黑 / 白名单规则，因为你可以在点击扩展图标后出现的弹窗中便捷的禁用 / 启用网页划词。"),l.a.createElement(u.h,{isOpen:e,keepChildrenMounted:!0},l.a.createElement("div",{className:"list"},l.a.createElement(b,{rules:c.domainBlackList,setRules:e=>{r({domainBlackList:e})},name:"黑名单"}),l.a.createElement(b,{rules:c.domainWhiteList,setRules:e=>{r({domainWhiteList:e})},name:"白名单"})),l.a.createElement(u.p,null,"测试黑 / 白名单"),l.a.createElement(u.l,null,l.a.createElement(u.s,{value:h,onChange:j,placeholder:"你可以填写一个网址来测试是否命中了黑名单或白名单"}),h&&!x&&l.a.createElement(u.d,{intent:"warning"},"网址格式不正确"),C&&l.a.createElement(u.d,null,P&&"没有命中白名单且","命中了",l.a.createElement("b",null,w?"白":"黑","名单"),"中的"," ",l.a.createElement(u.g,null,Object(E.e)(C))," 规则，此网址下会",l.a.createElement("b",null,w?"开启":"关闭"),"网页划词功能。"),x&&!P&&!w&&l.a.createElement(u.d,null,"既没有命中白名单，也没有命中黑名单，此网址下会开启网页划词功能。")))),l.a.createElement("div",{id:"文本筛选",className:"settings-block"},l.a.createElement(u.n,null,"文本筛选"),c.textList.map((e=>l.a.createElement(u.l,{key:e.name,helperText:e.description},l.a.createElement(u.f,{label:e.name,checked:e.enabled,onChange:()=>{return t=e,void r((e=>{const a=e.textList.indexOf(t);if(a>=0){const t=[...e.textList],n=t[a];return t[a]={...n,enabled:!n.enabled},{textList:t}}return{}}));var t}})))))):null}const x="chrome://extensions/?id="+browser.runtime.id;function C(){browser.tabs.create({url:x})}function w(){browser.tabs.create({url:"chrome://extensions/shortcuts"})}const P={_execute_browser_action:"此快捷键相当于点击了浏览器地址栏右侧的划词翻译图标。",panel:"这是一个全局快捷键，您可以在浏览器以外的地方按下快捷键来打开独立窗口。",translate:""};function N(){const{darkMode:e,setDarkMode:t}=Object(o.a)(),a=Object(n.useCallback)((e=>{t(e.target.value)}),[t]),[c,r]=Object(k.a)(g.d),i=Object(n.useCallback)((e=>{r({pdfAuto:e.target.checked})}),[r]),[s,m]=Object(n.useState)([]);return Object(n.useEffect)((()=>{browser.commands.getAll().then(m)}),[]),l.a.createElement("div",{id:"general"},l.a.createElement(u.m,null,"通用"),l.a.createElement("div",{id:"深色模式",className:"settings-block"},l.a.createElement(u.n,null,"深色模式"),l.a.createElement(u.l,{inline:!0},l.a.createElement(u.y,{inline:!0,onChange:a,selectedValue:e},l.a.createElement(u.x,{label:"开",value:"open"}),l.a.createElement(u.x,{label:"关",value:"close"}),l.a.createElement(u.x,{label:"跟随系统",value:"system"})))),l.a.createElement("div",{id:"PDF",className:"settings-block"},l.a.createElement(u.n,null,"PDF"),l.a.createElement(u.l,{helperText:l.a.createElement(l.a.Fragment,null,l.a.createElement("p",null,"开启后，当您在浏览器中打开 PDF 文件时，会自动跳转到划词翻译的内置 PDF 阅读器。在划词翻译内置的 PDF 阅读器里可以正常使用网页划词功能。"),l.a.createElement("div",null,"无论是否开启，您都可以在浏览器中打开的 PDF 文件或在一个指向 PDF 文件的链接上单击右键，选择“在划词翻译中打开此 PDF”来进入划词翻译的内置 PDF 阅读器。"))},l.a.createElement(u.f,{label:"使用划词翻译的内置 PDF 阅读器打开 PDF 文件",checked:c?c.pdfAuto:g.d.pdfAuto,onChange:i})),l.a.createElement(u.d,{title:"如何打开本地 PDF",intent:"primary"},l.a.createElement("p",null,"请先在",l.a.createElement("a",{onClick:C},"划词翻译的详细信息界面"),"勾选“允许访问文件网址”，然后将 PDF 文件拖放到浏览器中。如果您没有开启上面的设置项，那么还需要从右键菜单中选择“在划词翻译中打开此 PDF”。"),!1)),l.a.createElement("div",{id:"快捷键",className:"settings-block",style:{marginTop:"15px"}},l.a.createElement(u.n,null,"快捷键"),l.a.createElement("p",{className:"bp3-text-muted"},l.a.createElement(l.a.Fragment,null,"请前往",l.a.createElement("a",{onClick:w},"键盘快捷键页面"),"修改这些快捷键。"),!1),s.map((e=>l.a.createElement(u.l,{key:e.name,label:e.description||"激活该扩展程序",inline:!0,helperText:P[e.name]},l.a.createElement("input",{type:"text",className:"bp3-input",value:e.shortcut,disabled:!0}))))))}function M(){const[e,t]=Object(k.a)(g.b),a=Object(n.useCallback)((e=>{t({region:e.target.value})}),[t]);return l.a.createElement("div",{id:"api",className:"settings-block"},l.a.createElement(u.m,null,"翻译源"),l.a.createElement("p",{className:"bp3-text-small bp3-text-muted"},"这里的设置项是针对每个翻译源进行的个性化的设置，如果你是想调整面板显示哪些翻译源的结果，请前往左侧菜单的“翻译面板 - 常规设置”。"),l.a.createElement("div",{id:"谷歌翻译"},l.a.createElement(u.n,null,"谷歌翻译"),l.a.createElement(u.l,{label:"地区",inline:!0},l.a.createElement(u.y,{inline:!0,onChange:a,selectedValue:null==e?void 0:e.region},l.a.createElement(u.x,{label:"国内(.cn)",value:"cn"}),l.a.createElement(u.x,{label:"国外(.com)",value:"com"})))))}var A=a.p+"wechat.png",L=a.p+"alipay.png",D=a.p+"wechatPay.png";function S(){return l.a.createElement("div",{id:"about"},l.a.createElement(u.m,null,"关于划词翻译"),l.a.createElement("p",{id:"简介"},"划词翻译是一款简洁实用的翻译软件，支持桌面端的 Chrome、Edge 和 Firefox 浏览器。划词翻译由我个人创建于 2013 年，并持续维护至今。",l.a.createElement("a",{target:"_blank",rel:"noreferrer",href:"https://hcfy.limingkai.cn/histroy.html"},"查看划词翻译大事记")),l.a.createElement("div",{id:"赞助"},l.a.createElement("p",null,"在这几年来，维护划词翻译花费了我大量的业余时间。如果你觉得划词翻译对你有所帮助，可以考虑请我喝一杯咖啡 ;)"),l.a.createElement("p",null,l.a.createElement("img",{src:D,alt:"微信收款码",height:"200",style:{marginRight:"50px"}}),l.a.createElement("img",{src:L,alt:"支付宝收款码",height:"200"}))),l.a.createElement("div",{id:"联系作者"},l.a.createElement("p",null,"你可以通过划词翻译公众号联系我，并欢迎你向我反馈问题或提出改进建议。另外，我也会在公众号内发布一些版本更新、未来开发计划等通知："),l.a.createElement("p",null,l.a.createElement("img",{src:A,alt:"微信搜索“划词翻译”"}))),l.a.createElement("div",{id:"官网"},l.a.createElement("p",null,"你可以在划词翻译官网获取使用帮助和其它浏览器的安装方式："),l.a.createElement("p",null,l.a.createElement(u.b,{target:"_blank",rel:"noreferrer",href:"https://hcfy.limingkai.cn"},"打开划词翻译官网"))))}var F=a(37),I=a(21);function T(){const[e,t]=Object(k.a)(g.c),a=Object(n.useCallback)((e=>{t({autoClipboard:e.target.checked})}),[t]),c=Object(n.useCallback)((e=>{t({destination:e})}),[t]),r=Object(n.useCallback)((e=>{t({secondDestination:e})}),[t]),i=Object(n.useCallback)((e=>{t({showTextArea:e.target.checked})}),[t]),o=Object(n.useCallback)(((e,a)=>{const n=e.value;t((e=>{const t=[...e.selectedAPIs],l=t.indexOf(n);if(a){if(l<0)return t.push(n),{selectedAPIs:t}}else if(l>=0)return t.splice(l,1),{selectedAPIs:t}}))}),[t]);return l.a.createElement("div",null,l.a.createElement(u.m,null,"翻译面板"),l.a.createElement("div",{id:"常规设置"},l.a.createElement(u.l,{helperText:"点击扩展图标或使用全局快捷键打开独立窗口时，自动读取剪切板的内容并翻译"},l.a.createElement(u.z,{label:"自动读取剪切板",checked:e?e.autoClipboard:g.c.autoClipboard,onChange:a})),l.a.createElement(u.l,{label:"目标语种"},"优先翻译为"," ",l.a.createElement(F.a,{lang:e?e.destination:g.c.destination,setLang:c}),"，若源语种也是",e?e.destination:g.c.destination,"，则翻译为"," ",l.a.createElement(F.a,{lang:e?e.secondDestination:g.c.secondDestination,setLang:r})),l.a.createElement(u.l,{label:"翻译源"},I.a.map((t=>l.a.createElement(u.f,{inline:!0,label:t.name,key:t.value,checked:!!e&&e.selectedAPIs.includes(t.value),onChange:e=>o(t,e.target.checked)})))),l.a.createElement(u.l,{helperText:"是否要在网页划词面板中是否要显示文本框。在独立翻译窗口和扩展图标窗口中将始终显示文本框"},l.a.createElement(u.f,{label:"显示文本框",checked:e?e.showTextArea:g.c.showTextArea,onChange:i})),l.a.createElement(u.l,{label:"面板宽度",helperText:"拖动面板的左右边缘可以调整面板的宽度"},l.a.createElement(u.s,{disabled:!0,value:e?e.width+"px":g.c.width+"px"}))))}i.a.onlyShowFocusOnTabs();const R=[{id:"通用",label:"通用",isExpanded:!0,childNodes:[{id:"深色模式",label:"深色模式"},{id:"PDF",label:"PDF"},{id:"快捷键",label:"快捷键"}]},{id:"网页划词",label:"网页划词",isExpanded:!0,childNodes:[{id:"使用方式",label:"使用方式"},{id:"网址筛选",label:"网址筛选"},{id:"文本筛选",label:"文本筛选"}]},{id:"翻译面板",label:"翻译面板",isExpanded:!0,childNodes:[{id:"常规设置",label:"常规设置"}]},{id:"翻译源",label:"翻译源",isExpanded:!0,childNodes:[{id:"谷歌翻译",label:"谷歌翻译"}]},{id:"关于",label:"关于",isExpanded:!0,childNodes:[{id:"简介",label:"简介"},{id:"赞助",label:"赞助"},{id:"联系作者",label:"联系作者"},{id:"官网",label:"官网"}]}];a(200);r.a.render(l.a.createElement((function(){Object(o.a)();const[e,t]=Object(n.useState)((()=>{const e=decodeURI(window.location.hash.slice(1)),t=e?R.findIndex((t=>{var a;return null===(a=t.childNodes)||void 0===a?void 0:a.some((t=>t.id===e))})):-1;return{rootIndex:-1===t?0:t,nodeId:-1===t?"":e}}));return Object(n.useEffect)((()=>{e.nodeId&&(window.location.hash=e.nodeId)}),[e.nodeId]),l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"nav"},l.a.createElement(u.C,{contents:R,onNodeClick:(e,a)=>{e.childNodes||t({rootIndex:a[0],nodeId:e.id})}})),l.a.createElement("div",{className:"content"},function(e){switch(e){case 0:return l.a.createElement(N,null);case 1:return l.a.createElement(j,null);case 2:return l.a.createElement(T,null);case 3:return l.a.createElement(M,null);case 4:return l.a.createElement(S,null)}}(e.rootIndex)))}),null),document.getElementById("app"))},21:function(e,t,a){"use strict";const n={name:"百度翻译",value:"BaiDuWeb",icon:browser.runtime.getURL("baidu.ico")},l={name:"有道翻译",value:"YouDaoWeb",icon:browser.runtime.getURL("youdao.ico")},c={name:"谷歌翻译",value:"GoogleWeb",icon:browser.runtime.getURL("google.ico")};t.a=[c,n,l]},22:function(e,t,a){"use strict";function n(e){return`${e.host}${e.path}`}function l(e){const t=e.match(/^([^:]+):\/\/([^/]+)?(\/.*)?$/);if(!t)return;let a=t[2]||"";const n=a.indexOf(":");n>=0&&(a=a.slice(0,n));let l=t[3]||"";const c=l.indexOf("#");if(c>=0&&(l=l.slice(0,c)),!a.startsWith(".")){if(!l){if(!a)return;l="/"}return{host:a,path:l}}}function c(e,t){return new RegExp("^"+e.replace(/[-[\]{}()+?.,\\^$|#\s]/g,"\\$&").replace("*",".*").replace(/^\.\*\\\./,"(.*\\.)?")+"$").test(t)}function r(e,t){return new RegExp("^"+e.replace(/[-[\]{}()+?.,\\^$|#\s]/g,"\\$&").replace(/\*/g,".*")+"$").test(t)}function i(e,t){let a;if(a="string"==typeof t?l(t):t,a)return{isHostMatch:{ruleHost:e.host,urlHost:a.host,matches:c(e.host,a.host)},isPathMatch:{rulePath:e.path,urlPath:a.path,matches:r(e.path,a.path)}}}function u(e,t,a){let n,i;n="string"==typeof e?l(e):e;let u=!1,o=!1;if(n){const e=e=>{const t=function(e,t){let a;if(a="string"==typeof t?l(t):t,a)return c(e.host,a.host)&&r(e.path,a.path)}(e,n);return t&&(i=e),t};u=a.some(e),u||(o=t.some(e))}return{urlParts:n,matchedRule:i,whiteListMatched:u,blackListMatched:o}}function o(e,t,a){const n=u(e,t,a);return!n.urlParts||n.whiteListMatched||!n.blackListMatched}a.d(t,"e",(function(){return n})),a.d(t,"a",(function(){return l})),a.d(t,"d",(function(){return i})),a.d(t,"b",(function(){return u})),a.d(t,"c",(function(){return o}))},37:function(e,t,a){"use strict";a.d(t,"a",(function(){return E}));var n=a(0),l=a.n(n),c=a(84),r=a(56),i=a(45);const u="自动检测",o=[{zhName:u,pinyin:"zidongjiance"}].concat(i),s=c.a.ofType(),m=(e,{handleClick:t,modifiers:a})=>a.matchesPredicate?l.a.createElement(r.u,{onClick:t,active:a.active,key:e.zhName,text:e.zhName}):null,d=(e,t,a,n)=>{const l=e.toLowerCase();return n?t.zhName===l:t.zhName.includes(l)||t.pinyin.includes(l)};function E(e){const t=Object(n.useMemo)((()=>e.addAuto?o:i),[e.addAuto]),[a,c]=Object(n.useState)(null);return Object(n.useEffect)((()=>{const a=e.lang||u,n=t.find((e=>e.zhName===a))||null;c(n)}),[t,e.lang]),l.a.createElement(s,{className:"lang-select",onItemSelect:t=>{e.setLang(t.zhName===u?"":t.zhName)},activeItem:a,items:t,itemRenderer:m,itemPredicate:d,noResults:"没有搜索结果",inputProps:{placeholder:"使用拼音或中文搜索"},popoverProps:{usePortal:!1,modifiers:e.offset?{offset:{offset:e.offset}}:void 0}},l.a.createElement(r.c,{rightIcon:"caret-down",text:a?a.zhName:"请选择",small:null==e.small||e.small}))}},4:function(e,t,a){"use strict";a.d(t,"e",(function(){return n})),a.d(t,"a",(function(){return l})),a.d(t,"d",(function(){return c})),a.d(t,"c",(function(){return r})),a.d(t,"b",(function(){return i})),a.d(t,"f",(function(){return u}));const n={button:!0,modifierKey:!0,domainBlackList:[],domainWhiteList:[],textList:[{name:"忽略中文",readonly:!0,enabled:!1,value:"[\\u4e00-\\u9fa5]",description:"如果划选的文本当中包含中文，则不弹出翻译按钮或翻译结果。"},{name:"忽略字符",readonly:!0,enabled:!0,value:"^[\\s.\\-0-9()•+]+$",description:"如果划选的文本全部都是由数字、点、括号、空格、横线、加号和圆点（即 •，多用于密码框）组成的，则不弹出翻译按钮或翻译结果。"}],placement:"bottom"},l={darkMode:"system"},c={pdfAuto:!0},r={width:250,destination:"中文(简体)",secondDestination:"英语",showTextArea:!1,selectedAPIs:["BaiDuWeb"],autoClipboard:!0},i={region:"cn"},u={tipPanelSettingsClosed:!1}},41:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(0),l=a(10),c=a(4);function r(e=document.body){const[t,a]=Object(l.a)(c.a),r=Object(n.useCallback)((e=>{a({darkMode:e})}),[a]),i=null==t?void 0:t.darkMode;return Object(n.useEffect)((()=>{if(e)switch(i){case"open":return void t(!0);case"close":return void t(!1);case"system":const e=window.matchMedia("(prefers-color-scheme: dark)");t(e.matches);const a=()=>{t(e.matches)};return e.addEventListener("change",a),()=>{e.removeEventListener("change",a)}}function t(t){null==e||e.classList[t?"add":"remove"]("bp3-dark")}}),[i,e]),{darkMode:i,setDarkMode:r}}},65:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));const n=window.navigator.userAgent,l=n.includes("Mac");n.includes("Edg")},71:function(e,t){var a="undefined"!=typeof Element,n="function"==typeof Map,l="function"==typeof Set,c="function"==typeof ArrayBuffer&&!!ArrayBuffer.isView;function r(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){if(e.constructor!==t.constructor)return!1;var i,u,o,s;if(Array.isArray(e)){if((i=e.length)!=t.length)return!1;for(u=i;0!=u--;)if(!r(e[u],t[u]))return!1;return!0}if(n&&e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(s=e.entries();!(u=s.next()).done;)if(!t.has(u.value[0]))return!1;for(s=e.entries();!(u=s.next()).done;)if(!r(u.value[1],t.get(u.value[0])))return!1;return!0}if(l&&e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(s=e.entries();!(u=s.next()).done;)if(!t.has(u.value[0]))return!1;return!0}if(c&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if((i=e.length)!=t.length)return!1;for(u=i;0!=u--;)if(e[u]!==t[u])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if((i=(o=Object.keys(e)).length)!==Object.keys(t).length)return!1;for(u=i;0!=u--;)if(!Object.prototype.hasOwnProperty.call(t,o[u]))return!1;if(a&&e instanceof Element)return!1;for(u=i;0!=u--;)if(("_owner"!==o[u]&&"__v"!==o[u]&&"__o"!==o[u]||!e.$$typeof)&&!r(e[o[u]],t[o[u]]))return!1;return!0}return e!=e&&t!=t}e.exports=function(e,t){try{return r(e,t)}catch(e){if((e.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw e}}},89:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(7),l=a(52),c="undefined"!=typeof document?new l.a(document.documentElement,n.FOCUS_DISABLED):{isActive:function(){return!0},start:function(){return!0},stop:function(){return!0}},r={alwaysShowFocus:function(){return c.stop()},isActive:function(){return c.isActive()},onlyShowFocusOnTabs:function(){return c.start()}}}});